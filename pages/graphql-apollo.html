<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating a GraphQL Server withÂ Apollo</title>
    <meta name="description" content="[object Object]">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.ef35a4d2.css" as="style"><link rel="preload" href="/assets/js/app.db3c62db.js" as="script"><link rel="preload" href="/assets/js/9.454b5262.js" as="script"><link rel="preload" href="/assets/js/4.eac68367.js" as="script"><link rel="preload" href="/assets/js/170.aec3fd57.js" as="script"><link rel="prefetch" href="/assets/js/1.36663999.js"><link rel="prefetch" href="/assets/js/10.dd884694.js"><link rel="prefetch" href="/assets/js/100.d350c93e.js"><link rel="prefetch" href="/assets/js/101.a0f346f6.js"><link rel="prefetch" href="/assets/js/102.5aee7553.js"><link rel="prefetch" href="/assets/js/103.cd40300c.js"><link rel="prefetch" href="/assets/js/104.3f860f10.js"><link rel="prefetch" href="/assets/js/105.f8ebea5d.js"><link rel="prefetch" href="/assets/js/106.84577e76.js"><link rel="prefetch" href="/assets/js/107.27ac0460.js"><link rel="prefetch" href="/assets/js/108.2615d80d.js"><link rel="prefetch" href="/assets/js/109.a0275c41.js"><link rel="prefetch" href="/assets/js/11.e44a9c79.js"><link rel="prefetch" href="/assets/js/110.e0b89e24.js"><link rel="prefetch" href="/assets/js/111.85c1f355.js"><link rel="prefetch" href="/assets/js/112.83b57936.js"><link rel="prefetch" href="/assets/js/113.30083b82.js"><link rel="prefetch" href="/assets/js/114.2dcc568f.js"><link rel="prefetch" href="/assets/js/115.2ee55351.js"><link rel="prefetch" href="/assets/js/116.7f8fe402.js"><link rel="prefetch" href="/assets/js/117.ca8b3931.js"><link rel="prefetch" href="/assets/js/118.8bd003cb.js"><link rel="prefetch" href="/assets/js/119.d1d06b3e.js"><link rel="prefetch" href="/assets/js/12.e184416b.js"><link rel="prefetch" href="/assets/js/120.dab30e46.js"><link rel="prefetch" href="/assets/js/121.9d3257d5.js"><link rel="prefetch" href="/assets/js/122.21f57fef.js"><link rel="prefetch" href="/assets/js/123.826f7c41.js"><link rel="prefetch" href="/assets/js/124.c134f35c.js"><link rel="prefetch" href="/assets/js/125.88e1d9ef.js"><link rel="prefetch" href="/assets/js/126.1d33b1c8.js"><link rel="prefetch" href="/assets/js/127.882b658e.js"><link rel="prefetch" href="/assets/js/128.4387dd5e.js"><link rel="prefetch" href="/assets/js/129.350431a1.js"><link rel="prefetch" href="/assets/js/13.215ad842.js"><link rel="prefetch" href="/assets/js/130.62aa76ba.js"><link rel="prefetch" href="/assets/js/131.4a9b4652.js"><link rel="prefetch" href="/assets/js/132.067ac058.js"><link rel="prefetch" href="/assets/js/133.f925bfac.js"><link rel="prefetch" href="/assets/js/134.4b3c8ed1.js"><link rel="prefetch" href="/assets/js/135.96f53f83.js"><link rel="prefetch" href="/assets/js/136.8bd779e9.js"><link rel="prefetch" href="/assets/js/137.71cefa4d.js"><link rel="prefetch" href="/assets/js/138.3cb402cc.js"><link rel="prefetch" href="/assets/js/139.0480e428.js"><link rel="prefetch" href="/assets/js/14.1a060010.js"><link rel="prefetch" href="/assets/js/140.afa32967.js"><link rel="prefetch" href="/assets/js/141.03aaff81.js"><link rel="prefetch" href="/assets/js/142.d2c0dd55.js"><link rel="prefetch" href="/assets/js/143.3db9c299.js"><link rel="prefetch" href="/assets/js/144.7775d6c9.js"><link rel="prefetch" href="/assets/js/145.750f54ca.js"><link rel="prefetch" href="/assets/js/146.ce90e1b5.js"><link rel="prefetch" href="/assets/js/147.bb809de9.js"><link rel="prefetch" href="/assets/js/148.9c076f3a.js"><link rel="prefetch" href="/assets/js/149.70062715.js"><link rel="prefetch" href="/assets/js/15.34674cd6.js"><link rel="prefetch" href="/assets/js/150.3eb04a33.js"><link rel="prefetch" href="/assets/js/151.9c7af9fc.js"><link rel="prefetch" href="/assets/js/152.86614e8d.js"><link rel="prefetch" href="/assets/js/153.96a63cd3.js"><link rel="prefetch" href="/assets/js/154.b3f1f8dc.js"><link rel="prefetch" href="/assets/js/155.856f98be.js"><link rel="prefetch" href="/assets/js/156.3b2b9b5f.js"><link rel="prefetch" href="/assets/js/157.71fb8687.js"><link rel="prefetch" href="/assets/js/158.516c87fc.js"><link rel="prefetch" href="/assets/js/159.52b7d653.js"><link rel="prefetch" href="/assets/js/16.119e91d4.js"><link rel="prefetch" href="/assets/js/160.9ab8d57c.js"><link rel="prefetch" href="/assets/js/161.8b79f713.js"><link rel="prefetch" href="/assets/js/162.f321f983.js"><link rel="prefetch" href="/assets/js/163.f427055c.js"><link rel="prefetch" href="/assets/js/164.011a4165.js"><link rel="prefetch" href="/assets/js/165.fb04e357.js"><link rel="prefetch" href="/assets/js/166.22aa118b.js"><link rel="prefetch" href="/assets/js/167.9b3a7654.js"><link rel="prefetch" href="/assets/js/168.809a29e6.js"><link rel="prefetch" href="/assets/js/169.5ad4e8f0.js"><link rel="prefetch" href="/assets/js/17.86bc7706.js"><link rel="prefetch" href="/assets/js/171.32dbd986.js"><link rel="prefetch" href="/assets/js/172.601575f2.js"><link rel="prefetch" href="/assets/js/173.52dd154d.js"><link rel="prefetch" href="/assets/js/174.5ba6300a.js"><link rel="prefetch" href="/assets/js/175.2f89e69b.js"><link rel="prefetch" href="/assets/js/176.9dc0eac7.js"><link rel="prefetch" href="/assets/js/177.1c365624.js"><link rel="prefetch" href="/assets/js/178.91caba05.js"><link rel="prefetch" href="/assets/js/179.9c911a6e.js"><link rel="prefetch" href="/assets/js/18.cd87a72e.js"><link rel="prefetch" href="/assets/js/180.80655cbf.js"><link rel="prefetch" href="/assets/js/181.ed85d983.js"><link rel="prefetch" href="/assets/js/182.1e17fc78.js"><link rel="prefetch" href="/assets/js/183.02acffe6.js"><link rel="prefetch" href="/assets/js/184.9243297f.js"><link rel="prefetch" href="/assets/js/185.f8354684.js"><link rel="prefetch" href="/assets/js/186.d7462eed.js"><link rel="prefetch" href="/assets/js/187.26d2f0ca.js"><link rel="prefetch" href="/assets/js/188.5b1aa9be.js"><link rel="prefetch" href="/assets/js/189.d054804a.js"><link rel="prefetch" href="/assets/js/19.910fc8d0.js"><link rel="prefetch" href="/assets/js/190.c79e4c7b.js"><link rel="prefetch" href="/assets/js/191.190bbaf4.js"><link rel="prefetch" href="/assets/js/192.d0f08b9f.js"><link rel="prefetch" href="/assets/js/193.65076ebc.js"><link rel="prefetch" href="/assets/js/194.79a28f24.js"><link rel="prefetch" href="/assets/js/195.c3db4ae0.js"><link rel="prefetch" href="/assets/js/196.922f01f4.js"><link rel="prefetch" href="/assets/js/197.72fc5f68.js"><link rel="prefetch" href="/assets/js/198.3e9c7e4c.js"><link rel="prefetch" href="/assets/js/199.7c704dea.js"><link rel="prefetch" href="/assets/js/20.f2e93d17.js"><link rel="prefetch" href="/assets/js/200.8746331d.js"><link rel="prefetch" href="/assets/js/201.4698882a.js"><link rel="prefetch" href="/assets/js/202.0a8a7594.js"><link rel="prefetch" href="/assets/js/203.64f9b437.js"><link rel="prefetch" href="/assets/js/204.d6f38f7a.js"><link rel="prefetch" href="/assets/js/205.7866d898.js"><link rel="prefetch" href="/assets/js/206.9b24367e.js"><link rel="prefetch" href="/assets/js/207.2fb62ef6.js"><link rel="prefetch" href="/assets/js/208.8a29c442.js"><link rel="prefetch" href="/assets/js/21.8afea724.js"><link rel="prefetch" href="/assets/js/22.16b7f426.js"><link rel="prefetch" href="/assets/js/23.b4e38d6f.js"><link rel="prefetch" href="/assets/js/24.d54f4334.js"><link rel="prefetch" href="/assets/js/25.2d1f0877.js"><link rel="prefetch" href="/assets/js/26.d1bfb1b7.js"><link rel="prefetch" href="/assets/js/27.0610f28c.js"><link rel="prefetch" href="/assets/js/28.f1b496e3.js"><link rel="prefetch" href="/assets/js/29.08e9944c.js"><link rel="prefetch" href="/assets/js/3.970a66a4.js"><link rel="prefetch" href="/assets/js/30.ae297928.js"><link rel="prefetch" href="/assets/js/31.4fd0d93b.js"><link rel="prefetch" href="/assets/js/32.44966b63.js"><link rel="prefetch" href="/assets/js/33.eb167d44.js"><link rel="prefetch" href="/assets/js/34.295422ff.js"><link rel="prefetch" href="/assets/js/35.2c5a0b70.js"><link rel="prefetch" href="/assets/js/36.fddd48a5.js"><link rel="prefetch" href="/assets/js/37.367a54b5.js"><link rel="prefetch" href="/assets/js/38.77ea2014.js"><link rel="prefetch" href="/assets/js/39.18b0acf7.js"><link rel="prefetch" href="/assets/js/40.ee22aa00.js"><link rel="prefetch" href="/assets/js/41.8b43745c.js"><link rel="prefetch" href="/assets/js/42.66bb07f8.js"><link rel="prefetch" href="/assets/js/43.636bf8a8.js"><link rel="prefetch" href="/assets/js/44.b341b996.js"><link rel="prefetch" href="/assets/js/45.d885e19e.js"><link rel="prefetch" href="/assets/js/46.7e4d0e2f.js"><link rel="prefetch" href="/assets/js/47.3bc4cde3.js"><link rel="prefetch" href="/assets/js/48.4ee9fba2.js"><link rel="prefetch" href="/assets/js/49.14783870.js"><link rel="prefetch" href="/assets/js/5.d1da013e.js"><link rel="prefetch" href="/assets/js/50.13c266ab.js"><link rel="prefetch" href="/assets/js/51.4318da19.js"><link rel="prefetch" href="/assets/js/52.7c9cc18f.js"><link rel="prefetch" href="/assets/js/53.378b5732.js"><link rel="prefetch" href="/assets/js/54.e47e03a7.js"><link rel="prefetch" href="/assets/js/55.ee80e16b.js"><link rel="prefetch" href="/assets/js/56.e14027f4.js"><link rel="prefetch" href="/assets/js/57.b3cb8ffb.js"><link rel="prefetch" href="/assets/js/58.eb09f34e.js"><link rel="prefetch" href="/assets/js/59.a537c130.js"><link rel="prefetch" href="/assets/js/6.9bdf2d86.js"><link rel="prefetch" href="/assets/js/60.25c48265.js"><link rel="prefetch" href="/assets/js/61.8653aa8c.js"><link rel="prefetch" href="/assets/js/62.69bb406d.js"><link rel="prefetch" href="/assets/js/63.4e7c77ba.js"><link rel="prefetch" href="/assets/js/64.ecda83e6.js"><link rel="prefetch" href="/assets/js/65.55a0ff6e.js"><link rel="prefetch" href="/assets/js/66.ed942689.js"><link rel="prefetch" href="/assets/js/67.6f7c9f8c.js"><link rel="prefetch" href="/assets/js/68.006a7e36.js"><link rel="prefetch" href="/assets/js/69.574000ec.js"><link rel="prefetch" href="/assets/js/7.9ac2367b.js"><link rel="prefetch" href="/assets/js/70.e3b758e6.js"><link rel="prefetch" href="/assets/js/71.4d8bdcb1.js"><link rel="prefetch" href="/assets/js/72.c2526cec.js"><link rel="prefetch" href="/assets/js/73.d791feee.js"><link rel="prefetch" href="/assets/js/74.5973a4fb.js"><link rel="prefetch" href="/assets/js/75.69a97303.js"><link rel="prefetch" href="/assets/js/76.6241dd05.js"><link rel="prefetch" href="/assets/js/77.cc95848f.js"><link rel="prefetch" href="/assets/js/78.bf5853c2.js"><link rel="prefetch" href="/assets/js/79.6ca3cd68.js"><link rel="prefetch" href="/assets/js/8.6b13a443.js"><link rel="prefetch" href="/assets/js/80.db3dafc8.js"><link rel="prefetch" href="/assets/js/81.c48160c5.js"><link rel="prefetch" href="/assets/js/82.8c1c51fe.js"><link rel="prefetch" href="/assets/js/83.76256fe7.js"><link rel="prefetch" href="/assets/js/84.ba6c380e.js"><link rel="prefetch" href="/assets/js/85.71c3233e.js"><link rel="prefetch" href="/assets/js/86.fe0ed2a2.js"><link rel="prefetch" href="/assets/js/87.d7dca667.js"><link rel="prefetch" href="/assets/js/88.d7051ae9.js"><link rel="prefetch" href="/assets/js/89.ceed231e.js"><link rel="prefetch" href="/assets/js/90.cb5b9f7e.js"><link rel="prefetch" href="/assets/js/91.186b87b4.js"><link rel="prefetch" href="/assets/js/92.09574fb8.js"><link rel="prefetch" href="/assets/js/93.d159420a.js"><link rel="prefetch" href="/assets/js/94.59ad6229.js"><link rel="prefetch" href="/assets/js/95.06d1a88d.js"><link rel="prefetch" href="/assets/js/96.8ac1aaf0.js"><link rel="prefetch" href="/assets/js/97.b6ad2632.js"><link rel="prefetch" href="/assets/js/98.9157217b.js"><link rel="prefetch" href="/assets/js/99.c25b229f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ef35a4d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Creating a GraphQL Server withÂ Apollo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/graphql-apollo.html#resources" class="sidebar-link">Resources</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/graphql-apollo.html#install-and-set-up" class="sidebar-link">Install and setÂ up</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#define-a-schema" class="sidebar-link">Define aÂ schema</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#define-resolvers" class="sidebar-link">Define resolvers</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#start-the-server" class="sidebar-link">Start theÂ server</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#deeper-queries" class="sidebar-link">Deeper queries</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#summary" class="sidebar-link">Summary</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="creating-a-graphql-server-with-apollo"><a href="#creating-a-graphql-server-with-apollo" aria-hidden="true" class="header-anchor">#</a> Creating a GraphQL Server withÂ Apollo</h1> <p><img src="https://cdn-images-1.medium.com/max/1600/1*zhVHPUEyp_x3wpba3IWQCg.jpeg" alt="">
Follow me on <a href="https://twitter.com/chris_noring" target="_blank" rel="noopener noreferrer">Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, happy to take your suggestions on topics or improvements /Chris</p> <p>This article is part of a series on GraphQL:</p> <ul><li><a href="https://dev.to/softchris/building-a-graphql-server-with-nodejs-andexpress-5hfh" target="_blank" rel="noopener noreferrer">Building a GraphQL server using Node.js and Express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Building a GraphQL server using Node.js and the Apollo Framework, <strong>we are here</strong></li> <li><a href="https://dev.to/softchris/consuming-an-apollo-graphql-server-usingreact-3kk4" target="_blank" rel="noopener noreferrer">Consuming an Apollo GraphQL server using React<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>GraphQL is a new way we can use to build APIs. One of its prominent features is content-negotiation, a way for the client to tell the backend exactly what fields it needs and at what depth. This enables you to get a smaller payload of data back, which can really make a difference on a bad network connection.</p></blockquote> <p>Apollo is an entire platform for handling the backend as well as the client-side when using GraphQL and can even help you in the cloud. Itâs well worth checking out <a href="https://www.apollographql.com/" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>This article will be about how to create a GraphQL server using Apollo and thus only using a small part of what the Apollo platform can do. As you will see itâs pretty easy. I hope you enjoy the readÂ ð</p> <p>In this article we will cover:</p> <ul><li><strong>Install and set up</strong>, we will learn how to install <code>apollo-graphql</code> and <code>graphql</code> libraries needed to created our server</li> <li><strong>Define a schema and resolvers</strong>, a Schema is needed to describe our types. Resolvers are functions that are invoked to handle queries from the user.</li> <li><strong>Debugging</strong>, when we start our server we can do so in a debug mode so we get a browser page we can interact with and that will help us send our queries to our server and it will also show us the results</li></ul> <h2 id="resources"><a href="#resources" aria-hidden="true" class="header-anchor">#</a> Resources</h2> <p>Some of the below links are introductory so you can learn more after having read this article and some are more advanced once you feel you've grasped Graphql better.</p> <ul><li><a href="https://www.apollographql.com/" target="_blank" rel="noopener noreferrer">Apollo project landing page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.apollographql.com/docs/tutorial/schema.html" target="_blank" rel="noopener noreferrer">Building a schema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.apollographql.com/docs/tutorial/resolvers.html" target="_blank" rel="noopener noreferrer">How to write Resolvers for your server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.apollographql.com/docs/apollo-server/v1/servers/azure-functions.html" target="_blank" rel="noopener noreferrer">Using GraphQL with Azure Functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://azure.microsoft.com/en-us/blog/use-graphql-with-hasura-and-azure-database-for-postgresql/?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Using GraphQL on Azure generally<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="install-and-set-up"><a href="#install-and-set-up" aria-hidden="true" class="header-anchor">#</a> Install and setÂ up</h2> <p>To create a GraphQL server using Apollo Server we need to do three things:</p> <ol><li><strong>install</strong> <code>apollo-server</code> and <code>graphql</code></li> <li><strong>define</strong> a schema</li> <li><strong>define</strong> resolvers</li></ol> <p>Letâs install the needed dependencies:</p> <pre name="bed8" id="bed8" class="graf graf--pre graf-after--p">npm install --save apollo-server graphql</pre> <p>Once we have done that we are able to proceed with the next steps.</p> <h3 id="define-a-schema"><a href="#define-a-schema" aria-hidden="true" class="header-anchor">#</a> Define aÂ schema</h3> <p>To define a schema we need to be using a function called <code>gql</code> that allows us to define a schema like a multiline template string and most importantly using the GraphQL query language.</p> <p>First, we import <code>gql</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;apollo-server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Next up we can start defining the schema itself:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> typeDefs <span class="token operator">=</span> gql<span class="token template-string"><span class="token string">`
  type Query {
    products: [Product]
    product(id: Int!): Product
  }
  type Product {
    id: Int,
    name: String,
    description: String
  }
  input ProductInput {
    name: String,
    description: String
  }
  type Mutation {
    login(email: String): String # token
    createProduct(product: ProductInput)
  }
`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Finally, we export the schema for later usage</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> typeDefs<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The full file should now look like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;apollo-server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> typeDefs <span class="token operator">=</span> gql<span class="token template-string"><span class="token string">`
  type Query {
    products: [Product]
    product(id: Int!): Product
  }
  type Product {
    id: Int,
    name: String,
    description: String
  }
  input ProductInput {
    name: String,
    description: String
  }
  type Mutation {
    login(email: String!): String # token
    createProduct(product: ProductInput): String
  }
`</span></span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> typeDefs<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="define-resolvers"><a href="#define-resolvers" aria-hidden="true" class="header-anchor">#</a> Define resolvers</h3> <p>Next up we need to define what the following queries and mutations should do:</p> <ul><li><strong>products</strong>, this should return a list of products</li> <li><strong>product(id: Int!)</strong>, this should return one product</li> <li><strong>login(email: String)</strong>, this should log in the user</li> <li><strong>createProduct(product: ProductInput)</strong>, this should create a product</li></ul> <p>Letâs start a new file <code>resolvers.js</code>. At this point, we will keep things simple and have some local static data but we could improve this server by having it call a database or an API. So letâs define some static data at the top:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Now that Apollo server expects a certain type of object back with the following shape:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Not the two keywords <code>Query</code> and <code>Mutation</code> above. These two are objects and we need to define each corresponding resolver function. Letâs start by adding a resolver function for products:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getProducts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>A comment on <code>getProducts()</code> method is that we return a <code>Promise</code>. Now, we could return our <code>products</code> list directly but this is just a way to showcase that we can return an asynchronous response as well, which means this will fit well with us talking to a 3rd party API or doing a lookup on a database. To go along with our <code>Promise</code> response we mark it with <code>async</code> in our return object.</p> <h4 id="define-a-resolver-function-with-a-parameter"><a href="#define-a-resolver-function-with-a-parameter" aria-hidden="true" class="header-anchor">#</a> <strong>Define a resolver function with a parameter</strong></h4> <p>Weâve learned how to define a resolver function, and now letâs look at how we can grab a parameter from the user request and query our backend based on it.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getProductById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> productId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> productId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Above we added <code>product</code> to our <code>Query</code> object and as you can see we can quite easily dig out the <code>id</code> from the user request.</p> <h4 id="define-a-resolver-function-for-a-mutation"><a href="#define-a-resolver-function-for-a-mutation" aria-hidden="true" class="header-anchor">#</a> <strong>Define a resolver function for aÂ mutation</strong></h4> <p>To define resolvers for mutations we need to introduce a <code>Mutation</code> property on our exported object, just like we needed to introduce <code>Query</code>. So now our code should look like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Note the addition of <code>Mutation</code> above.</p> <p>The next step is to add our <code>createProduct</code> property and a resolver function that handles that, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">createProduct</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newId <span class="token operator">=</span> products<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span><span class="token punctuation">:</span> products<span class="token punctuation">[</span>products<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  products <span class="token operator">=</span> <span class="token punctuation">[</span> â¦products<span class="token punctuation">,</span> <span class="token punctuation">{</span> â¦product<span class="token punctuation">,</span> id<span class="token punctuation">:</span> newId<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>âsuccessâ<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">createProduct</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span> product      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="putting-it-all-together"><a href="#putting-it-all-together" aria-hidden="true" class="header-anchor">#</a> <strong>Putting it allÂ together</strong></h4> <p>Now we have defined a set of resolver functions, letâs have a look at the resulting code in its entirety:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getProducts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">getProductById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> productId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> productId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">createProduct</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newId <span class="token operator">=</span> products<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span><span class="token punctuation">:</span> products<span class="token punctuation">[</span>products<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  products <span class="token operator">=</span> <span class="token punctuation">[</span> â¦products<span class="token punctuation">,</span> <span class="token punctuation">{</span> â¦product<span class="token punctuation">,</span> id<span class="token punctuation">:</span> newId<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>âsuccessâ<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">createProduct</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span> product   <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>As you can see we have only operated on static data but we could easily switch those calls to target a database or a 3rd party API, thatâs entirely up to you. As long as you remember to use the <code>await</code> keyword in your resolver definition you are good to go with interacting with anything return a <code>Promise</code>.</p> <h3 id="start-the-server"><a href="#start-the-server" aria-hidden="true" class="header-anchor">#</a> <strong>Start theÂ server</strong></h3> <p>We have defined a schema and a set of resolver functions. Now letâs import <code>schema.js</code> and <code>resolvers.js</code> and kick off our server:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ApolloServer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;apollo-server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> typeDefs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./schema&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> resolvers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./resolvers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> typeDefs<span class="token punctuation">,</span> resolvers <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`ð Server ready at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="debug"><a href="#debug" aria-hidden="true" class="header-anchor">#</a> <strong>Debug</strong></h4> <p>Navigate to <code>http://localhost:4000</code> â</p> <p>you should have something looking like this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*p374DSjbjXIiYTCvMk74Jw.png" alt=""></p> <p>As you can see this looks very much like the GraphiQL environment we presented in the chapter <a href="https://medium.com/@noringc/building-a-graphql-server-with-node-js-and-express-f8ea78e831f9" target="_blank" rel="noopener noreferrer">GraphQL + Node.js Express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The idea is the same. On your left you have an area where you can enter <code>queries</code> and <code>mutations</code> and on your right is the results area. On the bottom left is a<code>variables</code> area that allows you to specify input variables that you can use the top left pane.</p> <h4 id="example-usage"><a href="#example-usage" aria-hidden="true" class="header-anchor">#</a> <strong>Example usage</strong></h4> <p>Letâs try to create a <code>query</code>. We can do so in two ways:</p> <ul><li><strong>using</strong> the no-keyword version, <code>{}</code></li> <li><strong>using</strong> the keyword <code>query</code></li></ul> <p>The first variant looks like this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*DCPCUlM32UN2be354dIpRw.png" alt=""></p> <p>As you can see above we are only using <code>{}</code> to specify our query and then we query for a resource <code>launches</code> and drills down into the resource to get the columns that we need, i.e <code>mission</code> and under <code>mission</code> we grab the column <code>name</code>.</p> <p>Letâs try to use the other query variant next by using the keyword <code>query</code>. The keyword query allows us to:</p> <ul><li><strong>Name</strong> the query so we can refer to it later</li> <li><strong>Specify more than one query</strong> in the same window, so we can choose which one we want at a given point in time</li> <li><strong>Specify a parameter</strong> for our query ( we will show this one in our next example )</li></ul> <p><img src="https://cdn-images-1.medium.com/max/1600/1*ZbQt75zef5UsHosMzp7aHg.png" alt=""></p> <p>Above we managed to specify two different queries and have given them the name <code>LaunchesNameOnly</code> and <code>LaunchesAll</code>. While specifying the <code>LaunchesAll</code> query you can see how our environment helps us by indicating the type of <code>isBooked</code>, that we are about to select. The type is a <code>Boolean!</code>, a mandatory <code>Boolean</code>.</p> <p>In our next example we show how you hit the large <code>play</code> button and is given the choice between different queries, as you can see it is a really great idea to define your queries with the keyword <code>query</code> so to create some order in your testing environment:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*3AobV3zHEwTwKOP7chtvBA.png" alt=""></p> <p>Below is simply the result of executing our query</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*c9KDNGt2b_q8Oi_NhL137Q.png" alt=""></p> <p>Letâs try to use variables next and see how we can declare those in the bottom left area and use them in our <code>queries</code> and <code>mutations</code>.</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*WvXIYtoB8q2uYtun3ag6tA.png" alt=""></p> <p>Above we have defined <code>OneLaunch</code> that takes a parameter <code>$id</code>. Thereafter this parameter <code>$id</code> is passed down to our actual query expression like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>launch(id: $id) {
  mission {
    name
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Now, we are ready to invoke our query, with a parameter and we simply hit the play button and we get this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*_qAKfxncxFN9wl24BvManw.png" alt=""></p> <p>The reason we get the above is that it read from the bottom left are that looks like this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*pKhKeGOIdkQG95B_tO5OiA.png" alt=""></p> <p>Variables in this area is all made up of one object and we simply add keys to this object when we need a new parameter like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;id&quot;: 1,
  &quot;otherparam&quot;: &quot;some value&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="deeper-queries"><a href="#deeper-queries" aria-hidden="true" class="header-anchor">#</a> <strong>Deeper queries</strong></h3> <p>One of the big selling points of GraphQL is the ability to query deep into a hierarchy, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  orders {
    created,
    createdBy {
      name,
      created
    },
    items {
      product {
        name
      },
      price
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Above we are querying on the resource <code>orders</code> and as you can see we are able to perform a lot of subqueries and query for <code>orders-&gt;items-&gt;product</code>. If we were to do that with SQL, it would be quite difficult with a lot of <code>JOINS</code>. So how are we able to construct this in GraphQL?</p> <p>In short, we need to do two things:</p> <ul><li><strong>define</strong> a resolver to the asked for subtype</li> <li><strong>store</strong> the data in a <em>resolvable</em> format. This means we need to store the data as an <code>id/ids</code> rather than the full object</li></ul> <h4 id="store-the-data-as-id-ids"><a href="#store-the-data-as-id-ids" aria-hidden="true" class="header-anchor">#</a> <strong>Store the data asÂ id/ids</strong></h4> <p>We need to store an order like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> orders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="define-a-resolver-for-a-subtype"><a href="#define-a-resolver-for-a-subtype" aria-hidden="true" class="header-anchor">#</a> <strong>Define a resolver for aÂ subtype</strong></h4> <p>How this is done syntactically depends on the GraphQL server implementation we are dealing with. In this case, we are dealing with Apollo, so letâs look at how Apollo handles it. We know that when we define a resolver object in Apollo it looks like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">orders</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">order</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrder</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// add mutation resolvers here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Now, our querying for <code>orders</code> means we are interested in querying for all its columns like <code>created</code> but also for a complex column like <code>items</code> and even <code>items -&gt; product</code> so we can ask a query like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  orders {
    created,
    items {
      product {
        name
      },
      price
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>So how do we resolve <code>items</code>? Well letâs have a look at our schema definition of an order:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>type Order {
  created: Date;
  items: [Item]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>With this in mind letâs head back to our resolver object and now we will add a <code>Order</code> type to like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">orders</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">order</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrder</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// add mutation resolvers here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Order <span class="token punctuation">{</span>
    <span class="token function-variable function">items</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Letâs zoom into our addition:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Order <span class="token punctuation">{</span>
  <span class="token function-variable function">items</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Here we can see that we are resolving what happens if someone queries for <code>items</code>. We are missing the <code>getItems()</code> method though so letâs define that:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> itemsList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> âitemâ
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> âitem2â
<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">getItems</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>itemsList<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Ok, so that deals with <code>items</code> so how do we deal with <code>items-&gt;product</code>. Well, that one is quite simple, we just again look at our schema:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>type OrderItem {
  price: Double;
  product: Product;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>We see now that we need to add <code>OrderItem</code> to our resolver object, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">orders</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">order</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrder</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// add mutation resolvers here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Order <span class="token punctuation">{</span>
    <span class="token function-variable function">items</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  OrderItem <span class="token punctuation">{</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProduct</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> <strong>Summary</strong></h3> <p>We have covered</p> <ul><li><strong>Installing</strong> <code>apollo-server</code> and <code>graphql</code>, in order to have the necessary dependencies to create an apollo server.</li> <li><strong>Defined</strong> a <code>schema</code> and a set of <code>resolvers</code>.</li> <li><strong>Booted up our server</strong>,</li> <li><strong>Explored</strong> the visual environment that allows us to run queries or mutations</li></ul> <p>Moving on we will look at different ways to consume said server using <code>apollo-client</code> so stay tuned for that.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.db3c62db.js" defer></script><script src="/assets/js/9.454b5262.js" defer></script><script src="/assets/js/4.eac68367.js" defer></script><script src="/assets/js/170.aec3fd57.js" defer></script>
  </body>
</html>
