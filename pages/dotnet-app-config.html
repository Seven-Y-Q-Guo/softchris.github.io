<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Learn how YOU can manage your app configuration in ASP .NET Core</title>
    <meta name="description" content="[object Object]">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.ef35a4d2.css" as="style"><link rel="preload" href="/assets/js/app.db3c62db.js" as="script"><link rel="preload" href="/assets/js/9.454b5262.js" as="script"><link rel="preload" href="/assets/js/4.eac68367.js" as="script"><link rel="preload" href="/assets/js/142.d2c0dd55.js" as="script"><link rel="prefetch" href="/assets/js/1.36663999.js"><link rel="prefetch" href="/assets/js/10.dd884694.js"><link rel="prefetch" href="/assets/js/100.d350c93e.js"><link rel="prefetch" href="/assets/js/101.a0f346f6.js"><link rel="prefetch" href="/assets/js/102.5aee7553.js"><link rel="prefetch" href="/assets/js/103.cd40300c.js"><link rel="prefetch" href="/assets/js/104.3f860f10.js"><link rel="prefetch" href="/assets/js/105.f8ebea5d.js"><link rel="prefetch" href="/assets/js/106.84577e76.js"><link rel="prefetch" href="/assets/js/107.27ac0460.js"><link rel="prefetch" href="/assets/js/108.2615d80d.js"><link rel="prefetch" href="/assets/js/109.a0275c41.js"><link rel="prefetch" href="/assets/js/11.e44a9c79.js"><link rel="prefetch" href="/assets/js/110.e0b89e24.js"><link rel="prefetch" href="/assets/js/111.85c1f355.js"><link rel="prefetch" href="/assets/js/112.83b57936.js"><link rel="prefetch" href="/assets/js/113.30083b82.js"><link rel="prefetch" href="/assets/js/114.2dcc568f.js"><link rel="prefetch" href="/assets/js/115.2ee55351.js"><link rel="prefetch" href="/assets/js/116.7f8fe402.js"><link rel="prefetch" href="/assets/js/117.ca8b3931.js"><link rel="prefetch" href="/assets/js/118.8bd003cb.js"><link rel="prefetch" href="/assets/js/119.d1d06b3e.js"><link rel="prefetch" href="/assets/js/12.e184416b.js"><link rel="prefetch" href="/assets/js/120.dab30e46.js"><link rel="prefetch" href="/assets/js/121.9d3257d5.js"><link rel="prefetch" href="/assets/js/122.21f57fef.js"><link rel="prefetch" href="/assets/js/123.826f7c41.js"><link rel="prefetch" href="/assets/js/124.c134f35c.js"><link rel="prefetch" href="/assets/js/125.88e1d9ef.js"><link rel="prefetch" href="/assets/js/126.1d33b1c8.js"><link rel="prefetch" href="/assets/js/127.882b658e.js"><link rel="prefetch" href="/assets/js/128.4387dd5e.js"><link rel="prefetch" href="/assets/js/129.350431a1.js"><link rel="prefetch" href="/assets/js/13.215ad842.js"><link rel="prefetch" href="/assets/js/130.62aa76ba.js"><link rel="prefetch" href="/assets/js/131.4a9b4652.js"><link rel="prefetch" href="/assets/js/132.067ac058.js"><link rel="prefetch" href="/assets/js/133.f925bfac.js"><link rel="prefetch" href="/assets/js/134.4b3c8ed1.js"><link rel="prefetch" href="/assets/js/135.96f53f83.js"><link rel="prefetch" href="/assets/js/136.8bd779e9.js"><link rel="prefetch" href="/assets/js/137.71cefa4d.js"><link rel="prefetch" href="/assets/js/138.3cb402cc.js"><link rel="prefetch" href="/assets/js/139.0480e428.js"><link rel="prefetch" href="/assets/js/14.1a060010.js"><link rel="prefetch" href="/assets/js/140.afa32967.js"><link rel="prefetch" href="/assets/js/141.03aaff81.js"><link rel="prefetch" href="/assets/js/143.3db9c299.js"><link rel="prefetch" href="/assets/js/144.7775d6c9.js"><link rel="prefetch" href="/assets/js/145.750f54ca.js"><link rel="prefetch" href="/assets/js/146.ce90e1b5.js"><link rel="prefetch" href="/assets/js/147.bb809de9.js"><link rel="prefetch" href="/assets/js/148.9c076f3a.js"><link rel="prefetch" href="/assets/js/149.70062715.js"><link rel="prefetch" href="/assets/js/15.34674cd6.js"><link rel="prefetch" href="/assets/js/150.3eb04a33.js"><link rel="prefetch" href="/assets/js/151.9c7af9fc.js"><link rel="prefetch" href="/assets/js/152.86614e8d.js"><link rel="prefetch" href="/assets/js/153.96a63cd3.js"><link rel="prefetch" href="/assets/js/154.b3f1f8dc.js"><link rel="prefetch" href="/assets/js/155.856f98be.js"><link rel="prefetch" href="/assets/js/156.3b2b9b5f.js"><link rel="prefetch" href="/assets/js/157.71fb8687.js"><link rel="prefetch" href="/assets/js/158.516c87fc.js"><link rel="prefetch" href="/assets/js/159.52b7d653.js"><link rel="prefetch" href="/assets/js/16.119e91d4.js"><link rel="prefetch" href="/assets/js/160.9ab8d57c.js"><link rel="prefetch" href="/assets/js/161.8b79f713.js"><link rel="prefetch" href="/assets/js/162.f321f983.js"><link rel="prefetch" href="/assets/js/163.f427055c.js"><link rel="prefetch" href="/assets/js/164.011a4165.js"><link rel="prefetch" href="/assets/js/165.fb04e357.js"><link rel="prefetch" href="/assets/js/166.22aa118b.js"><link rel="prefetch" href="/assets/js/167.9b3a7654.js"><link rel="prefetch" href="/assets/js/168.809a29e6.js"><link rel="prefetch" href="/assets/js/169.5ad4e8f0.js"><link rel="prefetch" href="/assets/js/17.86bc7706.js"><link rel="prefetch" href="/assets/js/170.aec3fd57.js"><link rel="prefetch" href="/assets/js/171.32dbd986.js"><link rel="prefetch" href="/assets/js/172.601575f2.js"><link rel="prefetch" href="/assets/js/173.52dd154d.js"><link rel="prefetch" href="/assets/js/174.5ba6300a.js"><link rel="prefetch" href="/assets/js/175.2f89e69b.js"><link rel="prefetch" href="/assets/js/176.9dc0eac7.js"><link rel="prefetch" href="/assets/js/177.1c365624.js"><link rel="prefetch" href="/assets/js/178.91caba05.js"><link rel="prefetch" href="/assets/js/179.9c911a6e.js"><link rel="prefetch" href="/assets/js/18.cd87a72e.js"><link rel="prefetch" href="/assets/js/180.80655cbf.js"><link rel="prefetch" href="/assets/js/181.ed85d983.js"><link rel="prefetch" href="/assets/js/182.1e17fc78.js"><link rel="prefetch" href="/assets/js/183.02acffe6.js"><link rel="prefetch" href="/assets/js/184.9243297f.js"><link rel="prefetch" href="/assets/js/185.f8354684.js"><link rel="prefetch" href="/assets/js/186.d7462eed.js"><link rel="prefetch" href="/assets/js/187.26d2f0ca.js"><link rel="prefetch" href="/assets/js/188.5b1aa9be.js"><link rel="prefetch" href="/assets/js/189.d054804a.js"><link rel="prefetch" href="/assets/js/19.910fc8d0.js"><link rel="prefetch" href="/assets/js/190.c79e4c7b.js"><link rel="prefetch" href="/assets/js/191.190bbaf4.js"><link rel="prefetch" href="/assets/js/192.d0f08b9f.js"><link rel="prefetch" href="/assets/js/193.65076ebc.js"><link rel="prefetch" href="/assets/js/194.79a28f24.js"><link rel="prefetch" href="/assets/js/195.c3db4ae0.js"><link rel="prefetch" href="/assets/js/196.922f01f4.js"><link rel="prefetch" href="/assets/js/197.72fc5f68.js"><link rel="prefetch" href="/assets/js/198.3e9c7e4c.js"><link rel="prefetch" href="/assets/js/199.7c704dea.js"><link rel="prefetch" href="/assets/js/20.f2e93d17.js"><link rel="prefetch" href="/assets/js/200.8746331d.js"><link rel="prefetch" href="/assets/js/201.4698882a.js"><link rel="prefetch" href="/assets/js/202.0a8a7594.js"><link rel="prefetch" href="/assets/js/203.64f9b437.js"><link rel="prefetch" href="/assets/js/204.d6f38f7a.js"><link rel="prefetch" href="/assets/js/205.7866d898.js"><link rel="prefetch" href="/assets/js/206.9b24367e.js"><link rel="prefetch" href="/assets/js/207.2fb62ef6.js"><link rel="prefetch" href="/assets/js/208.8a29c442.js"><link rel="prefetch" href="/assets/js/21.8afea724.js"><link rel="prefetch" href="/assets/js/22.16b7f426.js"><link rel="prefetch" href="/assets/js/23.b4e38d6f.js"><link rel="prefetch" href="/assets/js/24.d54f4334.js"><link rel="prefetch" href="/assets/js/25.2d1f0877.js"><link rel="prefetch" href="/assets/js/26.d1bfb1b7.js"><link rel="prefetch" href="/assets/js/27.0610f28c.js"><link rel="prefetch" href="/assets/js/28.f1b496e3.js"><link rel="prefetch" href="/assets/js/29.08e9944c.js"><link rel="prefetch" href="/assets/js/3.970a66a4.js"><link rel="prefetch" href="/assets/js/30.ae297928.js"><link rel="prefetch" href="/assets/js/31.4fd0d93b.js"><link rel="prefetch" href="/assets/js/32.44966b63.js"><link rel="prefetch" href="/assets/js/33.eb167d44.js"><link rel="prefetch" href="/assets/js/34.295422ff.js"><link rel="prefetch" href="/assets/js/35.2c5a0b70.js"><link rel="prefetch" href="/assets/js/36.fddd48a5.js"><link rel="prefetch" href="/assets/js/37.367a54b5.js"><link rel="prefetch" href="/assets/js/38.77ea2014.js"><link rel="prefetch" href="/assets/js/39.18b0acf7.js"><link rel="prefetch" href="/assets/js/40.ee22aa00.js"><link rel="prefetch" href="/assets/js/41.8b43745c.js"><link rel="prefetch" href="/assets/js/42.66bb07f8.js"><link rel="prefetch" href="/assets/js/43.636bf8a8.js"><link rel="prefetch" href="/assets/js/44.b341b996.js"><link rel="prefetch" href="/assets/js/45.d885e19e.js"><link rel="prefetch" href="/assets/js/46.7e4d0e2f.js"><link rel="prefetch" href="/assets/js/47.3bc4cde3.js"><link rel="prefetch" href="/assets/js/48.4ee9fba2.js"><link rel="prefetch" href="/assets/js/49.14783870.js"><link rel="prefetch" href="/assets/js/5.d1da013e.js"><link rel="prefetch" href="/assets/js/50.13c266ab.js"><link rel="prefetch" href="/assets/js/51.4318da19.js"><link rel="prefetch" href="/assets/js/52.7c9cc18f.js"><link rel="prefetch" href="/assets/js/53.378b5732.js"><link rel="prefetch" href="/assets/js/54.e47e03a7.js"><link rel="prefetch" href="/assets/js/55.ee80e16b.js"><link rel="prefetch" href="/assets/js/56.e14027f4.js"><link rel="prefetch" href="/assets/js/57.b3cb8ffb.js"><link rel="prefetch" href="/assets/js/58.eb09f34e.js"><link rel="prefetch" href="/assets/js/59.a537c130.js"><link rel="prefetch" href="/assets/js/6.9bdf2d86.js"><link rel="prefetch" href="/assets/js/60.25c48265.js"><link rel="prefetch" href="/assets/js/61.8653aa8c.js"><link rel="prefetch" href="/assets/js/62.69bb406d.js"><link rel="prefetch" href="/assets/js/63.4e7c77ba.js"><link rel="prefetch" href="/assets/js/64.ecda83e6.js"><link rel="prefetch" href="/assets/js/65.55a0ff6e.js"><link rel="prefetch" href="/assets/js/66.ed942689.js"><link rel="prefetch" href="/assets/js/67.6f7c9f8c.js"><link rel="prefetch" href="/assets/js/68.006a7e36.js"><link rel="prefetch" href="/assets/js/69.574000ec.js"><link rel="prefetch" href="/assets/js/7.9ac2367b.js"><link rel="prefetch" href="/assets/js/70.e3b758e6.js"><link rel="prefetch" href="/assets/js/71.4d8bdcb1.js"><link rel="prefetch" href="/assets/js/72.c2526cec.js"><link rel="prefetch" href="/assets/js/73.d791feee.js"><link rel="prefetch" href="/assets/js/74.5973a4fb.js"><link rel="prefetch" href="/assets/js/75.69a97303.js"><link rel="prefetch" href="/assets/js/76.6241dd05.js"><link rel="prefetch" href="/assets/js/77.cc95848f.js"><link rel="prefetch" href="/assets/js/78.bf5853c2.js"><link rel="prefetch" href="/assets/js/79.6ca3cd68.js"><link rel="prefetch" href="/assets/js/8.6b13a443.js"><link rel="prefetch" href="/assets/js/80.db3dafc8.js"><link rel="prefetch" href="/assets/js/81.c48160c5.js"><link rel="prefetch" href="/assets/js/82.8c1c51fe.js"><link rel="prefetch" href="/assets/js/83.76256fe7.js"><link rel="prefetch" href="/assets/js/84.ba6c380e.js"><link rel="prefetch" href="/assets/js/85.71c3233e.js"><link rel="prefetch" href="/assets/js/86.fe0ed2a2.js"><link rel="prefetch" href="/assets/js/87.d7dca667.js"><link rel="prefetch" href="/assets/js/88.d7051ae9.js"><link rel="prefetch" href="/assets/js/89.ceed231e.js"><link rel="prefetch" href="/assets/js/90.cb5b9f7e.js"><link rel="prefetch" href="/assets/js/91.186b87b4.js"><link rel="prefetch" href="/assets/js/92.09574fb8.js"><link rel="prefetch" href="/assets/js/93.d159420a.js"><link rel="prefetch" href="/assets/js/94.59ad6229.js"><link rel="prefetch" href="/assets/js/95.06d1a88d.js"><link rel="prefetch" href="/assets/js/96.8ac1aaf0.js"><link rel="prefetch" href="/assets/js/97.b6ad2632.js"><link rel="prefetch" href="/assets/js/98.9157217b.js"><link rel="prefetch" href="/assets/js/99.c25b229f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ef35a4d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Learn how YOU can manage your app configuration in ASP .NET Core</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/dotnet-app-config.html#references" class="sidebar-link">References</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-app-config.html#read-data" class="sidebar-link">Read data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/dotnet-app-config.html#demo-override-a-value" class="sidebar-link">Demo, override a value</a></li></ul></li><li><a href="/pages/dotnet-app-config.html#bind-data-make-it-type-safe" class="sidebar-link">Bind data, make it type safe</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/dotnet-app-config.html#summary" class="sidebar-link">Summary</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/pm5042dbwlkl6ikwpznr.jpg" alt=""></p> <p>TLDR; this article gives you a high-level view of configuration management for ASP .NET. It teaches you about various sources, providers and how to read config data. It also shows you how to make your config data type safe.</p> <p>Why do we need configuration? Well, the answer is that we need our app to perform differently without necessarily recompile it. The reason for that is to make it flexible for different environments. It should be enough to just change a config value to get the app to go towards a completely new endpoint for example. ASP.NET has our back, it knows config data can come from a million different places, files, like JSON or ini, environment variables or even Azure. ASP .NET has a set of services, so called providers that reads out this config data for us.</p> <p>What we need to know to work efficiently with it, is to know what providers exist (so we know where we can place our config data) and in what order the data is read, so we know what data will take effect. Also, it's helpful to know that all data are key-value pairs. It doesn't stop the data from being nested though. Don't worry there are two different ways we can deal with nesting, untyped and typed.</p> <p>Let's just stress one more time some important dimensions on configuration management:</p> <ul><li><p><strong>Config data can come from many sources</strong>. Data can be read from a number of different sources like JSON files, environment variables, Azure Services and more. Here's a list of all the different sources:</p> <ul><li>Settings files, such as appsettings.json</li> <li>Environment variables</li> <li>Azure Key Vault</li> <li>Azure App Configuration</li> <li>Command-line arguments</li> <li>Custom providers, installed or created</li> <li>Directory files</li> <li>In-memory .NET objects</li></ul></li> <li><p><strong>Config data is read in a certain order</strong>. Host configuration is the first thing to be read followed by JSON data found in <em>appsettings.json</em> and an environment specific version. The complete read order looks like so:</p> <ol><li><p><code>ChainedConfigurationProvider</code> : Adds an existing <code>IConfiguration</code> as a source. In the default configuration case, adds the host configuration and setting it as the first source for the app configuration.</p></li> <li><p><strong>App setttings JSON file</strong>. There's an <em>appsettings.json</em> that is read using the JSON configuration provider.</p></li> <li><p><strong>Environment specific app settings JSON</strong>. After the initial <em>appsettings.json</em> is read it looks read from an environment specific app settings file. So essentially it's looking for a file on this format <em>appsettings.Environment.json</em> using the JSON configuration provider. For example, <em>appsettings.Production.json</em> or <em>appsettings.Development.json</em>.</p></li> <li><p><strong>App secrets</strong>. If you are running in a dev environment it tries to read secrets next.</p></li> <li><p><strong>Environment variables</strong>. After that it reads any environment variables  using the Environment Variables configuration provider.</p></li> <li><p><strong>Command-line arguments</strong>. Lastly it reads command line arguments using the Command-line configuration provider.</p></li></ol> <blockquote><p>NOTE, if the same key exist in two different sources it's the latter one that gets applied. For example i a key exist in <em>appsetttings.json</em>, that value will be overwritten if it also exist as an environment variable.</p></blockquote></li> <li><p><strong>Don't place sensitive data as config data</strong>. You need to know what data is sensitive or not. As a rule of thumb, place sensitive data in a service like Azure Key Vault, avoid placing such data in configuration files! You can still read from Azure Key Vault using a configuration manager, so in theory it's as straight forward as reading the data from a JSON file for example.</p></li></ul> <h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2> <p>I've left some hopefully useful links so you can learn more about all the different providers and options. Hopefully this article gives you a good foundation to continue learning.</p> <ul><li><p><a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host?view=aspnetcore-5.0#default-builder-settings&amp;WT.mc_id=dotnet-12379-chnoring" target="_blank" rel="noopener noreferrer">Builder settings<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-5.0&amp;WT.mc_id=dotnet-12379-chnoring" target="_blank" rel="noopener noreferrer">Configuration management docs for ASP .NET<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h2 id="read-data"><a href="#read-data" aria-hidden="true" class="header-anchor">#</a> Read data</h2> <p>To read configuration data lets turn our attention to <em>Program.cs</em> and it's constructor that should look like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Here we are injecting an instance of <code>IConfiguration</code>. It will attempt to read data from <em>appsettings.json</em> file, so how do we access it? Looking at the content of <em>appsettings.json</em> we see that it looks like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Logging&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;LogLevel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;Default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Information&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Microsoft&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Warning&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Microsoft.Hosting.Lifetime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Information&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;AllowedHosts&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>To read a non-nested value like <code>AllowedHosts</code> we can type like so:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>Configuration<span class="token punctuation">[</span><span class="token string">&quot;AllowedHosts&quot;</span><span class="token punctuation">]</span>  <span class="token comment">// *</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>However, if we need a nested value like Logging-&gt;LogLevel-&gt;Default we need to access it with <code>:</code> as separator. We instead type like so:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">var</span> <span class="token keyword">value</span> <span class="token operator">=</span> Configuration<span class="token punctuation">[</span><span class="token string">&quot;Logging:LogLevel:Default&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Information</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>NOTE, you are likely to want to access this kind of data when setting up services so you are more likely to read from <code>Configuration</code> instance in <code>ConfigureServices()</code> method rather than the constructor, as is demonstrated above. With that said, all you need to do is to inject <code>IConfiguration</code> in any constructor where you might need it, like a controller for example, like so:</p></blockquote> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token function">IndexModel</span><span class="token punctuation">(</span>ILogger<span class="token operator">&lt;</span>IndexModel<span class="token operator">&gt;</span> logger<span class="token punctuation">,</span> <span class="token class-name">IConfiguration</span> configuration <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    _logger <span class="token operator">=</span> logger<span class="token punctuation">;</span>
    _configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
    
    <span class="token keyword">var</span> serviceConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _configuration<span class="token punctuation">.</span><span class="token function">GetSection</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">.</span>Services<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">.</span>CartServiceUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">.</span>ProductsServiceUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="demo-override-a-value"><a href="#demo-override-a-value" aria-hidden="true" class="header-anchor">#</a> Demo, override a value</h3> <p>We stated earlier that the last provider to be read is the one that decided the value on the config data. Lets demo this by placing a setting <code>API</code> like so in <em>appsetting.json</em>:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;API&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000/api&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>and now place a slightly different entry in <em>appsettings.Development.json</em> like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;API&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:5000/api&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Change the code in the <code>Startup</code> constructor to read <code>API</code>, like so:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">var</span> <span class="token keyword">value</span> <span class="token operator">=</span> Configuration<span class="token punctuation">[</span><span class="token string">&quot;API&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://localhost:5000/api</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>As you can see, the last read source, <em>appsettings.Development.json</em> decided the value.</p> <h2 id="bind-data-make-it-type-safe"><a href="#bind-data-make-it-type-safe" aria-hidden="true" class="header-anchor">#</a> Bind data, make it type safe</h2> <p>At some point, you might loose track of what configuration you have. You might have 10-20 different keys, or more, at various levels of nesting. The problem with that is that it's starting to get messy. Knowing what keys are actually used could be a combination of looking into JSON files, environment variables or even the source code. So how do you approach and manage such a mess?</p> <p>The way to manage it is how you manage most things in .NET and C#, type it. The idea is to have variables or structures like classes for most things you plan to use, your config data shouldn't be any different. So how do we type our config data then - use a class.</p> <p>Let's assume you have a few endpoints <code>ProductsServiceUrl</code> and <code>CartServiceUrl</code> that you want to keep track of and that they should be set to different values in different environment. You can create a class for that, like so:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">class</span> <span class="token class-name">ServiceConfiguration</span> 
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token keyword">string</span> Services <span class="token operator">=</span> <span class="token string">&quot;Services&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">string</span> ProductsServiceUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">string</span> CartServiceUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The next thing we want to do is to tell ASP .NET to <em>bind</em> an instance of the above class to a specific section of our config. Imagine you know have a section in <em>appsettings.json</em> that looks like this:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;Services&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;ProductsServiceUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000/products&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;CartServiceUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000/cart&quot;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Once you've created a class for this and added the config data it's time to read out the data. We can read the data like by locating the constructor of <code>Startup</code> class in <em>Startup.cs</em> and add the following code:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">var</span> serviceConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Configuration<span class="token punctuation">.</span><span class="token function">GetSection</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">.</span>Services<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">.</span>CartServiceUrl<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://localhost:3000/cart</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>serviceConfig<span class="token punctuation">.</span>ProductsServiceUrl<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://localhost:3000/products</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The use of <code>GetSection()</code> enables us to drill down into the part of the config that's interesting for us. Using <code>bind()</code> we <em>bind</em> the sections content to an instance of <code>ServiceConfiguration</code> and thereby populate the instance with the values from the config section.</p> <h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <p>You learned how config data can exist in various sources. You also learned how ASP .NET was able to read from these sources. Furthermore, you were shown various ways to read nested and un nested data. Lastly you looked at how to make your config data more type safe.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.db3c62db.js" defer></script><script src="/assets/js/9.454b5262.js" defer></script><script src="/assets/js/4.eac68367.js" defer></script><script src="/assets/js/142.d2c0dd55.js" defer></script>
  </body>
</html>
