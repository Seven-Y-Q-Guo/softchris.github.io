(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{384:function(t,e,a){"use strict";a.r(e);var s=a(1),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("Feature flags is a concept meaning that you switch features on and off via a flag. Why would you want to do that?")]),t._v(" "),a("p",[t._v("Here's some good reasons:")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Early integration")]),t._v(". Usually you work on a feature in a branch. The longer the feature takes to complete, the more trouble you will have with merging/rebasing, once you are done with the feature. Being able to integrate the feature into your main branch early means less of that kind of hassle. The effect of this is that you can ship a feature to production before it's ready for public use. This type of deployment is also called "),a("em",[t._v("dark deployment")]),t._v(".")]),t._v(" "),a("li",[a("strong",[t._v("A/B testing")]),t._v(". A known pattern for trying out new, or changed features, is A/B testing. In A/B testing you want to answer a question, is A better than B. A represents one version of your app and B the other. To find this out, you create different versions of an app. Then you decide to filter your incoming user traffic so that different users ends up on different versions. You can then measure different things such as conversion rates, if you are an e-commerce, or maybe if more users click a certain button and more. One way you can use to create different versions of a site, is to ensure that different features are activated. On a website this can mean that different flags are set in "),a("em",[t._v("localStorage")]),t._v(", or you use parameters in the URL or it's decided via data from the backend.")]),t._v(" "),a("li",[a("strong",[t._v("Flighting")]),t._v(". Flighting is a term that means that a certain percentage of users gets a new feature. It can be almost the same mechanisms at play as with A/B testing. Instead of trying to answer whether A is better than B, you try to deliver a new feature to a subset of users to see if they can use a feature without issue. If there's an issue, you can always roll back.")])]),t._v(" "),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references","aria-hidden":"true"}},[t._v("#")]),t._v(" References")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.microsoft.com/azure/azure-app-configuration/concept-feature-management?WT.mc_id=dotnet-11820-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Why feature management"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/azure-app-configuration/quickstart-feature-flag-aspnet-core?tabs=core3x&WT.mc_id=dotnet-11820-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Use an App Configuration store to add feature flags to ASP .NET Core"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://azure.microsoft.com/en-gb/free/?WT.mc_id=dotnet-11820-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Free Azure account"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"using-feature-flags"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-feature-flags","aria-hidden":"true"}},[t._v("#")]),t._v(" Using feature flags")]),t._v(" "),a("p",[t._v("Depending on if you are working on a mobile app, a webapp or some other type of software, how you implement feature flags might differ. The flow of how a feature flag is applied is roughly the same though:")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("Create the flag")]),t._v(". Create the flag with suitable name and namespace and give it a value.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Evaluate the flags value")]),t._v(". This means that somewhere there's a line of code looking roughly like so:")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// render A, else B")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("Code like that might be baked into a tag component, so you might not have to write it. (That's just what it is in .NET Core)")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Render different experiences")]),t._v(". As a result of the previous bullet you end up doing something differently, either you render/don't render a certain portion of a page. Or, you redirect from one route to another route and so on. The exact details of this process is up to you, but the steps are the same.")])])]),t._v(" "),a("h3",{attrs:{id:"no-recompile-no-redeploy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#no-recompile-no-redeploy","aria-hidden":"true"}},[t._v("#")]),t._v(" No recompile, No redeploy")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/tbwraeu66c3d49g39pq8.png",alt:"Jean Claude Van Damme from the movie, no retreat no surrender"}})]),t._v(" "),a("blockquote",[a("p",[t._v("Above is Jean Claude Van Damme in the movie, No retreat, no surrender. The only way to beat the bad guy (Van Damme) was by a superior technique, taught to a young fighter by the ghost of Bruce Lee. You might not have a ghost handy, but you can make sure that the way you manage your feature flags is done with a minimum of interruption - No recompile, no redeploy.")])]),t._v(" "),a("p",[t._v("You can have the flag as a variable within your code. Depending on what it's set to, the "),a("em",[t._v("feature")]),t._v(" is either on or off. This has a weakness though, it forces you to change the code, recompile and redeploy it. That can work for you but oftentimes you want a different behavior, you want to be able to enable/disable flags with no compilation or redeploy. So how do you do that? You move the mechanism for managing the flags outside of your source code. There's a couple of ways to do that, and we will explore both ways:")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Configuration file")]),t._v(". By specifying the flags and their value in a configuration file and have your app read from said file, you accomplish a decoupling of "),a("em",[t._v("flag management")]),t._v(" and app.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Configuration service")]),t._v(". A configuration service is a service endpoint, reachable by for example an HTTP request. Such a service can be placed in your companies' network or in the cloud.")])])]),t._v(" "),a("p",[t._v("Let's look at how you can implement feature flags in .NET Core next, with both the mentioned approaches.")]),t._v(" "),a("h2",{attrs:{id:"example-usage-net-core-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-usage-net-core-app","aria-hidden":"true"}},[t._v("#")]),t._v(" Example usage, .NET Core App")]),t._v(" "),a("p",[t._v("It's possible to work with feature flags locally by using a built-in functionality in ASP .NET Core that uses a JSON file "),a("em",[t._v("appsettings.json")]),t._v(". Using said JSON files you can define what flags you have and their values. Then you can rely on decorators and built-in tags in Razor to display differently depending on the value of the flags.")]),t._v(" "),a("p",[t._v("You'll start by trying out the configuration file scenario first and then move to use the App Config store in Azure.")]),t._v(" "),a("h3",{attrs:{id:"create-flags-and-configure-your-project-to-use-them"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-flags-and-configure-your-project-to-use-them","aria-hidden":"true"}},[t._v("#")]),t._v(" Create flags and configure your project to use them")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Create an ASP .NET Core project with the following command:")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("dotnet new mvc --no-https --output TestFeatureFlags\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("The command will create an MVC project in a sub directory "),a("code",[t._v("TestFeatureFlags")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Navigate into your project:")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" TestFeatureFlags\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("Add the following NuGet packages with the following command:")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("dotnet "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" package Microsoft.Azure.AppConfiguration.AspNetCore\ndotnet "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" package Microsoft.FeatureManagement.AspNetCore\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("Locate "),a("code",[t._v("Startup.cs")]),t._v(" and add the following using statement at the top:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" Microsoft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FeatureManagement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("In the same file, locate "),a("code",[t._v("ConfigureServices()")]),t._v(" method and add rows:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("services"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddFeatureManagement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("In the same file, locate "),a("code",[t._v("Configure()")]),t._v(" and add this row:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseAzureAppConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("By default .NET Core reads from a "),a("code",[t._v("FeatureManagement")]),t._v(" section of the config file "),a("em",[t._v("appsettings.json")]),t._v(". You can override that by specifying your own name like so in "),a("code",[t._v("ConfigureService()")]),t._v(" method:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("services"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddFeatureManagement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetSection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyFeatureFlags"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("It's up to you if you want to do this change or not, we will however continue with the default, so we need to specify a "),a("code",[t._v("FeatureManagement")]),t._v(" section in "),a("em",[t._v("appsetting.json")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Open "),a("em",[t._v("appsetting.json")]),t._v(" and add the following JSON configuration:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"FeatureManagement"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"FeatureA"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Beta"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"FeatureB"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"FeatureC"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"EnabledFor"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n             "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Percentage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n             "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Parameters"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                 "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("Above, you introduce the features "),a("code",[t._v("FeatureA")]),t._v(", "),a("code",[t._v("Beta")]),t._v(", "),a("code",[t._v("FeatureB")]),t._v(" and "),a("code",[t._v("FeatureC")]),t._v(". Note how "),a("code",[t._v("FeatureC")]),t._v(" is nested.")])])]),t._v(" "),a("h3",{attrs:{id:"render-the-content"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#render-the-content","aria-hidden":"true"}},[t._v("#")]),t._v(" Render the content")]),t._v(" "),a("p",[t._v("Next you will see how you can use the Razor tag "),a("code",[t._v("feature")]),t._v(" and render a portion if the correct flag is enabled.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Locate the "),a("em",[t._v("Index.cshtml")]),t._v(" file under "),a("code",[t._v("Views/Home")]),t._v(". At the top of the file add the following row:")]),t._v(" "),a("div",{staticClass:"language-razor line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("@addTagHelper *, Microsoft.FeatureManagement.AspNetCore\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("This line will let you use the "),a("code",[t._v("feature")]),t._v(" tag.")])]),t._v(" "),a("li",[a("p",[t._v("In the same file, change the HTML content to this text:")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text-center"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("display-4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Welcome"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Learn about "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://docs.microsoft.com/aspnet/core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("building Web apps with ASP.NET Core"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("."),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("feature")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("nav-item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("nav-link text-dark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("asp-area")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("asp-controller")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("asp-action")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Beta"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("feature")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("Note above the usage of the "),a("code",[t._v("feature")]),t._v(" tag:")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("feature")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("nav-item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("nav-link text-dark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("asp-area")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("asp-controller")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("asp-action")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Beta"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("feature")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("What you are saying is, if the flag "),a("code",[t._v("Beta")]),t._v(" is set to "),a("code",[t._v("true")]),t._v(", then render this portion. Consulting your "),a("em",[t._v("appsettings.json")]),t._v(" you can see the flag "),a("code",[t._v("Beta")]),t._v(" is "),a("code",[t._v("true")]),t._v(", so it should work. Let's build and run our project next.")])]),t._v(" "),a("li",[a("p",[t._v("Run the following command to build and run your project:")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("dotnet build "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" dotnet run\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("You see an output similar to the below:")]),t._v(" "),a("div",{staticClass:"language-output line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("info: Microsoft.Hosting.Lifetime[0]\n   Now listening on: http://localhost:5000\ninfo: Microsoft.Hosting.Lifetime[0]\n   Application started. Press Ctrl+C to shut down.\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("Open a browser and navigate to "),a("code",[t._v("http://localhost:5000")]),t._v(". You should see the following:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/6qj4eulntohbbdtdotyk.png",alt:"Webpage with beta content rendered"}})])]),t._v(" "),a("li",[a("p",[t._v("Next, open up your "),a("em",[t._v("appsetting.json")]),t._v(" and set the "),a("code",[t._v("Beta")]),t._v(" flag to false, like so:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Beta"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Save the file and refresh the browser. You should now see the following:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/yusdcasispqwongxfntj.png",alt:"Beta content not rendered"}})])])]),t._v(" "),a("p",[t._v("Congrats, you've managed to set up feature flags locally and control its usage via "),a("em",[t._v("appsetting.json")]),t._v(" file. However, if your app is deployed to a cloud service like Azure, it's somewhat impractical to go into the deployment files, open a file and save it. I mean you can, but it feels clumsy, or even worse, change the file locally and redeploy the whole thing, yikes !")]),t._v(" "),a("p",[t._v("A better approach is to rely on a configuration service. For Azure you can use something called "),a("em",[t._v("Azure Config Store")]),t._v(". Let's leverage that service next.")]),t._v(" "),a("h2",{attrs:{id:"adding-azure-config-store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-azure-config-store","aria-hidden":"true"}},[t._v("#")]),t._v(" Adding Azure Config Store")]),t._v(" "),a("p",[t._v("Before we add the cloud service the review the steps we are about to take:")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Set up secrets storage")]),t._v(". A good way of moving configuration and keys, during development, is to use the secrets storage. The secrets storage is tool that associates keys to a specific .NET Core project. Moving your app to the cloud though, you would need to use the App Configuration tab to place your secrets in or even better, Azure Key Vault.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Provision Azure Config Store")]),t._v(". Provision the config store is straight forward. Here we will provision the store and add a feature flag that will mirror what we have in the "),a("em",[t._v("appsettings.json")]),t._v(".")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Configure App to use Config Store")]),t._v(". Finally we will configure our app to use the Config store. That's done by pointing out the connection string of the config store and one code line of configuring.")])])]),t._v(" "),a("h3",{attrs:{id:"set-up-secrets-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-up-secrets-storage","aria-hidden":"true"}},[t._v("#")]),t._v(" Set up secrets storage")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("To set up the secrets storage, run the command "),a("code",[t._v("dotnet user-secrets init")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("dotnet user-secrets init\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("You now have a new entry in your project file ending with  "),a("em",[t._v(".csproj")]),t._v(", something similar to this:")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("UserSecretsId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("9dcd0c7b-e32d-407d-aabd-d34c644ecaaf"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("UserSecretsId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("We will return to secrets management once we need to persist the connection string from our cloud resource.")])])]),t._v(" "),a("h3",{attrs:{id:"provision-azure-config-store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provision-azure-config-store","aria-hidden":"true"}},[t._v("#")]),t._v(" Provision Azure Config Store")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("To provision an "),a("code",[t._v("Azure Config Store")]),t._v(", head to "),a("code",[t._v("portal.azure.com")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Select "),a("strong",[t._v("Create a resource")]),t._v(", from the top left menu.")])]),t._v(" "),a("li",[a("p",[t._v("In the "),a("strong",[t._v("Search the Marketplace box")]),t._v(", enter "),a("em",[t._v("App Configuration")]),t._v(" and select "),a("code",[t._v("Enter")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Select "),a("strong",[t._v("App Configuration")]),t._v(" from the search results, and then select "),a("strong",[t._v("Create")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("On the "),a("strong",[t._v("Create App Configuration pane")]),t._v(", enter the following settings:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/cp92hadcaar9un4encmr.png",alt:"Create App Config resource table"}})])]),t._v(" "),a("li",[a("p",[t._v("Select "),a("strong",[t._v("Review + create")]),t._v(" to validate your settings.")])]),t._v(" "),a("li",[a("p",[t._v("Select "),a("strong",[t._v("Create")])])])]),t._v(" "),a("h3",{attrs:{id:"get-connection-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-connection-string","aria-hidden":"true"}},[t._v("#")]),t._v(" Get connection string")]),t._v(" "),a("p",[t._v("Once the resource has finished provisioning, head to the resource page.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Select "),a("strong",[t._v("Settings > Access")]),t._v(" keys.")])]),t._v(" "),a("li",[a("p",[t._v("Make a note of the primary read-only key connection string.")])])]),t._v(" "),a("h3",{attrs:{id:"create-a-feature-flag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-feature-flag","aria-hidden":"true"}},[t._v("#")]),t._v(" Create a feature flag")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Select "),a("strong",[t._v("Operations > Feature manager > Add")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("In the Add pane:")]),t._v(" "),a("ol",[a("li",[t._v("check "),a("strong",[t._v("Enable feature flag")])]),t._v(" "),a("li",[t._v("For "),a("strong",[t._v("Feature flag name")]),t._v(", enter "),a("em",[t._v("Beta")])]),t._v(" "),a("li",[t._v("Select "),a("strong",[t._v("Apply")]),t._v(", to create the feature flag")])])])]),t._v(" "),a("h3",{attrs:{id:"configure-app-to-use-config-store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-app-to-use-config-store","aria-hidden":"true"}},[t._v("#")]),t._v(" Configure App to use Config Store")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("In a terminal, in your project root, run "),a("code",[t._v('dotnet user-secrets set"')]),t._v(":")]),t._v(" "),a("p",[t._v("Ensure you replace "),a("strong",[t._v('"<your connection string>"')]),t._v(" with the connection string you made a note of in the Azure Portal.")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("dotnet user-secrets "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" ConnectionStrings:AppConfig "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your_connection_string>"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("This will set a secret in the secrets manager that you will be able to retrieve via code next.")])]),t._v(" "),a("li",[a("p",[t._v("Open up "),a("em",[t._v("Startup.cs")]),t._v(", locate the "),a("code",[t._v("Configure()")]),t._v(" method and add the row:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseAzureAppConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("In the same file, locate "),a("code",[t._v("ConfigureServices()")]),t._v(" and add this row:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("services"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddAzureAppConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("Open the file "),a("em",[t._v("Program.cs")]),t._v(", locate the method "),a("code",[t._v("CreateHostBuilder()")]),t._v(" and replace it with the following code:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IHostBuilder")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateHostBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])])]),t._v(" "),a("p",[t._v('=>\nHost.CreateDefaultBuilder(args)\n.ConfigureWebHostDefaults(webBuilder =>\nwebBuilder.ConfigureAppConfiguration(config =>\n{\nvar settings = config.Build();\nvar connection = settings.GetConnectionString("AppConfig");\nconfig.AddAzureAppConfiguration(options =>\noptions.Connect(connection).UseFeatureFlags());\n}).UseStartup'),a("Startup",[t._v("());")])],1),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\nWhat you did was calling the `ConfigureAppConfiguration()` method on the `webBuilder` instance. It takes an `Action` delegate where you retrieve the `AppConfig` value from the section `ConnectingStrings`. Then you use the result string value and call `AddAzureAppConfiguration()` that connects to the Config store and instructs it to use feature flags. Next, let's rebuild and run your app and see if it works :)\n\n1. Run the app with this terminal command:\n\n```bash\ndotnet build && dotnet run\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("You should now see your app rendered like this:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/6qj4eulntohbbdtdotyk.png",alt:"Beta content showing in web page"}})]),t._v(" "),a("p",[t._v("This time, the feature flag value is read from Azure instead of from "),a("em",[t._v("appsettings.json")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Let's uncheck the flag:")]),t._v(" "),a("ol",[a("li",[t._v("Return back to Azure portal and the App Config resource page:")]),t._v(" "),a("li",[t._v("Select "),a("strong",[t._v("Operations > Feature manager")])]),t._v(" "),a("li",[t._v("Uncheck the checkbox for the "),a("strong",[t._v("Beta")]),t._v(" feature flag.")]),t._v(" "),a("li",[t._v("Restart the app by running "),a("code",[t._v("Ctrl-C")]),t._v(" followed by "),a("code",[t._v("dotnet run")]),t._v(".")])]),t._v(" "),a("p",[t._v("This time, you should see the following image, with the "),a("strong",[t._v("Beta")]),t._v(" text gone.")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/yusdcasispqwongxfntj.png",alt:"Feature flag off"}})])])]),t._v(" "),a("h2",{attrs:{id:"summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#summary","aria-hidden":"true"}},[t._v("#")]),t._v(" Summary")]),t._v(" "),a("p",[t._v("First you learned about what feature flags are and in what scenarios they make sense to use. Then you learned some weird movie trivia about Van Damme, sorry 😉 . After that you learned how to set up feature flag locally using the "),a("em",[t._v("appsettings.json")]),t._v(" file. Finally, you learned how to use Azure App Config service and not only store your feature flags there but read their values from your app. Hopefully, this got you more interested in using the App Config service, cause there's more to learn 😃")])])},[],!1,null,null,null);e.default=n.exports}}]);