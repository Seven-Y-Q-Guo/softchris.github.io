(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{378:function(t,e,s){"use strict";s.r(e);var n=s(1),a=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"learn-docker-from-the-beginning-part-v"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#learn-docker-from-the-beginning-part-v","aria-hidden":"true"}},[t._v("#")]),t._v(" Learn Docker, from the beginning, part V")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*Vju_axcWsgxsBCRf3527Dw.jpeg",alt:""}})]),t._v(" "),s("p",[t._v("Follow me on "),s("a",{attrs:{href:"https://twitter.com/chris_noring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Twitter"),s("OutboundLink")],1),t._v(", happy to take your suggestions on topics or improvements /Chris")]),t._v(" "),s("p",[t._v("This article is part of a series:")]),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://dev.to/softchris/docker---from-the-beginning-part-i-28c6https://dev.to/softchris/docker---from-the-beginning-part-i-28c6",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker — from the beginning part I"),s("OutboundLink")],1),t._v(", this covers why Docker, the basic concepts and the commands we need to manage things like images and containers.")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://dev.to/softchris/docker-from-the-beginning---part-ii-5g8n",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker — from the beginning, Part II"),s("OutboundLink")],1),t._v(", this is about Volumes and how we can use volumes to persist data but also how we can turn our development environment into a Volume and make our development experience considerably better")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://softchris.github.io/pages/docker-three.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker — from the beginning, Part III"),s("OutboundLink")],1),t._v(",\nthis is about how to deal with Databases, putting them into containers and how to make containers talk to other containers using legacy linking but also the new standard through networks")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://softchris.github.io/pages/docker-four.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker — from the beginning, Part IV"),s("OutboundLink")],1),t._v(", Part IV, this is how we manage more than one service using Docker Compose ( this is 1/2 part on Docker Compose)")])]),t._v(" "),s("li",[s("p",[t._v("Docker - from the beginning, Part V, "),s("strong",[t._v("we are here")])])])]),t._v(" "),s("p",[t._v("We will keep working on our project introduced in Part IV and in doing so we will showcase more Docker Compose features and essentially build out our project to cover everything you might possibly need.")]),t._v(" "),s("p",[t._v("In this part, we will cover:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Environment variables")]),t._v(" , now we have covered those in previous parts so this is mostly about how we set them in Docker Compose")]),t._v(" "),s("li",[s("strong",[t._v("Volumes")]),t._v(" , same thing with volumes, this has been covered in previous articles even though we will mention their use and how to work with them with Docker Compose")]),t._v(" "),s("li",[s("strong",[t._v("Networks and Databases")]),t._v(" , finally we will cover Databases and Networks, this part is a bit tricky but hopefully, we managed to explain it thoroughly")])]),t._v(" "),s("p",[t._v("If you at any point should feel confused here is the repo this article is based on:")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://github.com/softchris/docker-compose-experiments",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/softchris/docker-compose-experiments"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"resources"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resources","aria-hidden":"true"}},[t._v("#")]),t._v(" Resources")]),t._v(" "),s("p",[t._v("Using Docker and containerization is about breaking apart a monolith into microservices. Throughout this series, we will learn to master Docker and all its commands. Sooner or later you will want to take your containers to a production environment. That environment is usually the Cloud. When you feel you've got enough Docker experience have a look at these links to see how Docker can be used in the Cloud as well:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/containers/?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Containers in the Cloud"),s("OutboundLink")],1),t._v("\nGreat overview page that shows what else there is to know about containers in the Cloud")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/container-instances/container-instances-tutorial-prepare-app?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Deploying your containers in the Cloud"),s("OutboundLink")],1),t._v(" Tutorial that shows how easy it is to leverage your existing Docker skill and get your services running in the Cloud")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/container-instances/container-instances-tutorial-prepare-acr?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Creating a container registry"),s("OutboundLink")],1),t._v("\nYour Docker images can be in Docker Hub but also in a Container Registry in the Cloud. Wouldn't it be great to store your images somewhere and actually be able to create a service from that Registry in a matter of minutes?")])]),t._v(" "),s("h2",{attrs:{id:"environment-variables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#environment-variables","aria-hidden":"true"}},[t._v("#")]),t._v(" Environment variables")]),t._v(" "),s("p",[t._v("One of the things I’ve shown you in previous articles is how we can specify environment variables. Now variables can be set in the "),s("code",[t._v("Dockerfile")]),t._v(" but we can definitely set them on the command line and thereby also in Docker Compose and specifically in "),s("code",[t._v("docker-compose.yaml")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-docker line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-docker"}},[s("code",[t._v("// docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("compose.yaml\n\nversion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),t._v("\nservices"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   build"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service\n   ports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8000:3000"')]),t._v("\n   environment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  \n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" test=testvalue \n inventory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   build"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./inventory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service\n   ports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8001:3000"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("Above we are creating an environment variable by defining environment followed by "),s("code",[t._v("-test=testvalue")]),t._v(", which means we create the variable test with value, "),s("code",[t._v("testvalue")]),t._v(".")]),t._v(" "),s("p",[t._v("We can easily test that this works by reading from process.env.test in our app.js file for the product-service directory.")]),t._v(" "),s("p",[t._v("Another way to test this is to run Docker compose and query for what environment variables are available, like so:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*rOSUR7zhFT4SqO2-Hx4TBw.png",alt:""}})]),t._v(" "),s("p",[t._v("As you can see above we first run docker-compose ps and get the containers that are part of this Docker Compose session and then we run "),s("code",[t._v("docker exec [container name] env")]),t._v(" to list the environment variables. A third option is to run "),s("code",[t._v("docker exec -it [container name] bash")]),t._v(" and enter the container and use bash to echo out the variable value. There are quite a few ways to manage environment variables with Docker compose so have a read in the "),s("a",{attrs:{href:"https://docs.docker.com/compose/environment-variables/",target:"_blank",rel:"noopener noreferrer"}},[t._v("official docs"),s("OutboundLink")],1),t._v(", what else you can do.")]),t._v(" "),s("h2",{attrs:{id:"volumes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volumes","aria-hidden":"true"}},[t._v("#")]),t._v(" Volumes")]),t._v(" "),s("p",[t._v("We’ve covered volumes in an earlier part of this series and we found them to be a great way to:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("create a persistent space")]),t._v(" , this is ideal to create log files or output from a Database that we want to remain, once we tear down and run our containers")]),t._v(" "),s("li",[s("strong",[t._v("turn our development environment into a Volume")]),t._v(" , the benefits of doing so meant that we could start up a container and then change our code and see those changes reflected without having to rebuild or tear down our container, a real time saver.")])]),t._v(" "),s("h3",{attrs:{id:"create-a-persistent-space"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-persistent-space","aria-hidden":"true"}},[t._v("#")]),t._v(" Create a persistent space")]),t._v(" "),s("p",[t._v("Let’s see how we can deal with Volumes in Docker compose:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// docker-compose.yml\n\nversion: \'3\'\nservices:\n product-service:\n   build:\n     context: ./product-service\n   ports:\n     - "8000:3000"\n   environment:\n     - test=testvalue\n inventory-service:\n   build:\n     context: ./inventory-service\n   ports:\n     - "8001:3000"\n  volumes:  \n    - my-volume:/var/lib/data\n\nvolumes:  \n  my-volume:\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("p",[t._v("Above we are creating a volume by the command volumes at the end of the file and on the second row we give it the name "),s("code",[t._v("my-volume")]),t._v(". Furthermore, in the inventory-service portion of our file, we refer to the just created volume and create a mapping to "),s("code",[t._v("/var/lib/data")]),t._v(" which is a directory in the volume that will be persisted, through teardowns. Let’s look that it is correctly mapped:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*4twcO-Lrvw-3B3l0bjHGoA.png",alt:""}})]),t._v(" "),s("p",[t._v("As can be seen, by the above command, we first enter the container with "),s("code",[t._v("docker exec")]),t._v(" followed by us navigating to our mapping directory, it is there, great 😃.")]),t._v(" "),s("p",[t._v("Let’s create a file in the data directory so we can prove that our volume mapping really works:")]),t._v(" "),s("blockquote",[s("p",[t._v("echo persist > persist.log")])]),t._v(" "),s("p",[t._v("The above command creates a file "),s("code",[t._v("persist.log")]),t._v(" with the content persist . Nothing fancy but it does create a file that we can look for after tearing down and restarting our container.")]),t._v(" "),s("p",[t._v("Now we can exit the container. Next, let’s recap on some useful Volume commands:")]),t._v(" "),s("blockquote",[s("p",[t._v("docker volume ls")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*XDWyoIcwjNWcQjzCEM0FaQ.png",alt:""}})]),t._v(" "),s("p",[t._v("The above lists all the currently mounted volumes. We can see that our created Volume is there compose-experiments_my-volume .")]),t._v(" "),s("p",[t._v("We can dive into more details with:")]),t._v(" "),s("blockquote",[s("p",[t._v("docker volume inspect compose-experiments_my-volume")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*HXrFVqZwjwkkjTfEN3oNCQ.png",alt:""}})]),t._v(" "),s("p",[t._v("Ok, so it’s giving us some details about our volume such as "),s("code",[t._v("Mountpoint")]),t._v(", which is where files will be persisted when we write to our volume mapping directory in the container.")]),t._v(" "),s("p",[t._v("Let’s now bring down our containers with:")]),t._v(" "),s("blockquote",[s("p",[t._v("docker-compose down")])]),t._v(" "),s("p",[t._v("This means that the Volume should still be there so let’s bring them all up with:")]),t._v(" "),s("blockquote",[s("p",[t._v("docker-compose up -d")])]),t._v(" "),s("p",[t._v("Let’s enter the container next and see if our persist.log file is there:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*dSGfuvU53coEhcMPhbw9oQ.png",alt:""}})]),t._v(" "),s("p",[t._v("Oh yeah, it works.")]),t._v(" "),s("p",[t._v("###Turn your current directory into a Volume")]),t._v(" "),s("p",[t._v("Ok, for this we need to add a new volume and we need to point out a directory on our computer and a place in the container that should be in sync. Your "),s("code",[t._v("docker-compose.yaml")]),t._v(" file should look like the following:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// docker-compose.yaml\n\nversion: \'3\'\nservices:\n  product-service:\n    build:\n      context: ./product-service\n    ports:\n      - "8000:3000"\n    environment:\n      - test=testvalue\n    volumes:  \n      - type: bind  \n      source: ./product-service  \n      target: /app  \n  inventory-service:\n    build:\n      context: ./inventory-service\n    ports:\n      - "8001:3000"\n    volumes:\n      - my-volume:/var/lib/data\n\nvolumes:\n  my-volume:\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("p",[t._v("The new addition is added to the "),s("code",[t._v("product-service")]),t._v(". We can see that we are specifying a volumes command with one entry. Let’s break down that entry:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("type: bind")]),t._v(" , this creates a so-called "),s("a",{attrs:{href:"https://docs.docker.com/storage/bind-mounts/",target:"_blank",rel:"noopener noreferrer"}},[s("em",[t._v("bind mount")]),s("OutboundLink")],1),t._v(", a type of volume more fit for purpose of syncing files between your local directory and your container")]),t._v(" "),s("li",[s("strong",[t._v("source")]),t._v(" , this is simply where your files are, as you can see we are pointing out "),s("code",[t._v("./product-service")]),t._v(". This means that as soon as we change a file under that directory Docker will pick up on it.")]),t._v(" "),s("li",[s("strong",[t._v("target")]),t._v(" , this is the directory in the container, source and target will now be in sync we do a change in source, the same change will happen to target")])]),t._v(" "),s("p",[t._v("##Networks and databases")]),t._v(" "),s("p",[t._v("Ok then, this is the last part we aim to cover in this article. Let’s start with databases. All major vendors have a Docker image like Sql Server, Postgres, MySQL and so on. This means we don’t need to do the build-step to get them up and running but we do need to set things like environment variables and of course open up ports so we can interact with them. Let’s have a look at how we can add a MySQL database to our solution, that is our "),s("code",[t._v("docker-compose.yml")]),t._v(" file.")]),t._v(" "),s("h3",{attrs:{id:"adding-a-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-database","aria-hidden":"true"}},[t._v("#")]),t._v(" Adding a database")]),t._v(" "),s("p",[t._v("Adding a database to "),s("code",[t._v("docker-compose.yaml")]),t._v(" is about adding an already premade image. Lucky for us MySQL already provides a ready-made one. To add it we just need to add another entry under services: like so:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// docker-compose.yaml\n\nproduct-db:\n  image: mysql\n  environment:\n    - MYSQL_ROOT_PASSWORD=complexpassword\n  ports:\n    - 8002:3306\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("Let’s break it down:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("product-db")]),t._v(" is the name of our new service entry, we choose this name")]),t._v(" "),s("li",[s("code",[t._v("image")]),t._v(" is a new command that we are using instead of build , we use this when the image is already built, which is true for most databases")]),t._v(" "),s("li",[s("code",[t._v("environment")]),t._v(" , most databases will need to have a certain number of variables set to be able to connect to them like username, password and potentially the name of the database, this varies per type of database. In this case, we set MYSQL_ROOT_PASSWORD so we instruct the MySQL instance what the password is for the root user. We should consider creating a number of users with varying access levels")]),t._v(" "),s("li",[t._v("ports, this is exposing the ports that will be open and thereby this is our entrance in for talking to the database. By typing "),s("code",[t._v("8002:3306")]),t._v(" we say that the container's port "),s("code",[t._v("3306")]),t._v(" should be mapped to the external port "),s("code",[t._v("8002")])])]),t._v(" "),s("p",[t._v("Let’s see if we can get the database and the rest of our services up and running:")]),t._v(" "),s("blockquote",[s("p",[t._v("docker-compose up -d")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*TRzocCrQzt2dzD7BowtXFw.png",alt:""}})]),t._v(" "),s("p",[t._v("Let’s verify with:")]),t._v(" "),s("blockquote",[s("p",[t._v("docker-compose ps OR docker ps")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*mv-p4iFB2sUx3YD80FWa7w.png",alt:""}})]),t._v(" "),s("p",[t._v("Looks, good, our database service "),s("code",[t._v("experiments_product-db_1")]),t._v(" seems to be up and running on port "),s("code",[t._v("8002")]),t._v(". Let’s see if we can connect to the database next. The below command will connect us to the database, fingers crossed 😉")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mysql -uroot -pcomplexpassword -h 0.0.0.0 -P 8002\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/498/1*2_db0xR6z_9mcYLLsi-u3w.gif",alt:""}})]),t._v(" "),s("p",[t._v("and the winner is…")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*ddxwWglQQqg2q1v4Cnt5UA.png",alt:""}})]),t._v(" "),s("p",[t._v("Great, we did it. Next up let’s see if we can update one of our services to connect to the database.")]),t._v(" "),s("h3",{attrs:{id:"connecting-to-the-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#connecting-to-the-database","aria-hidden":"true"}},[t._v("#")]),t._v(" Connecting to the database")]),t._v(" "),s("p",[t._v("There are three major ways we could be connecting to the database:")]),t._v(" "),s("ul",[s("li",[t._v("using docker client, we’ve tried this one already with "),s("code",[t._v("mysql -uroot -pcomplexpassword -h 0.0.0.0 -P 8002")])]),t._v(" "),s("li",[t._v("enter our container, we do this using "),s("code",[t._v("docker exec -it [name of container] bash")]),t._v(" and then we type "),s("code",[t._v("mysql")]),t._v(" inside of the container")]),t._v(" "),s("li",[t._v("connecting through our app, this is what we will look at next using the NPM library mysql")])]),t._v(" "),s("p",[t._v("We will focus on the third choice, connecting to a database through our app. The database and the app will exist in different containers. So how do we get them to connect? The answer is:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("needs to be in the same network")]),t._v(" , for two containers to talk to each other they need to be in the same network")]),t._v(" "),s("li",[s("strong",[t._v("database needs to be ready")]),t._v(" , it takes a while to start up a database and for your app to be able to talk to the database you need to ensure the database have started up correctly, this was a "),s("em",[t._v("fun/interesting/painful")]),t._v(" til I figured it out, so don’t worry I got you, we will succeed 😃")]),t._v(" "),s("li",[s("strong",[t._v("create a connection object")]),t._v(" , ensure we set up the connection object correctly in "),s("code",[t._v("app.js")]),t._v(" for "),s("code",[t._v("product-service")])])]),t._v(" "),s("p",[t._v("Let’s start with the first item here. How do we get the database and the container into the same network? Easy, we create a network and we place each container in that network. Let’s show this in "),s("code",[t._v("docker-compose.yaml")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// excerpt from docker-compose.yaml\n\nnetworks:\n  products:\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("We need to assign this network to each service, like so:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// excerpt from docker-compose.yaml\n\nservices:\n  some-service:\n    networks:  \n      - products\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("Now, for the second bullet point, how do we know that the database is finished initializing? Well, we do have a property called "),s("code",[t._v("depends_on")]),t._v(", with that property, we are able to specify that one container should wait for another container to start up first. That means we can specify it like so:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// excerpt from docker-compose.yaml\n\nservices:\n some-service:\n   depends_on: db\n db:\n   image: mysql\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("Great so that solves it or? Nope nope nope, hold your horses:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/575/1*Ons95kxrJQd3lbF9XzKscg.gif",alt:""}})]),t._v(" "),s("p",[t._v("So in Docker compose version 2 there used to be an alternative where we could check for a service’s health, if health was good we could process to spin up our container. It looked like so:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("depends_on:\n db:\n   condition: service_healthy\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("This meant that we could wait for a database to initialize fully. This was not to last though, in version 3 this option is gone. Here is doc page that explains why, "),s("a",{attrs:{href:"https://docs.docker.com/compose/startup-order/",target:"_blank",rel:"noopener noreferrer"}},[t._v("control startup and shutdown order"),s("OutboundLink")],1),t._v(". The gist of it is that now it’s up to us to find out when our database is done and ready to connect to. Docker suggests several scripts for this:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/vishnubob/wait-for-it",target:"_blank",rel:"noopener noreferrer"}},[t._v("wait-for-it"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/jwilder/dockerize",target:"_blank",rel:"noopener noreferrer"}},[t._v("dockerize"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/Eficode/wait-for",target:"_blank",rel:"noopener noreferrer"}},[t._v("wait-for"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("All these scripts have one thing in common, the idea is to listen to a specific "),s("code",[t._v("host")]),t._v(" and "),s("code",[t._v("port")]),t._v(" and when that replies back, then we run our app. So what do we need to do to make that work? Well let’s pick one of these scripts, namely "),s("code",[t._v("wait-for-it")]),t._v(" and let’s list what we need to do:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("copy")]),t._v(" this script into your service container")]),t._v(" "),s("li",[s("strong",[t._v("give")]),t._v(" the script execution rights")]),t._v(" "),s("li",[s("strong",[t._v("instruct")]),t._v(" the docker file to run the script with database host and port as args and then to run the service once the script OKs it")])]),t._v(" "),s("p",[t._v("Let’s start with copying the script from GitHub into our "),s("code",[t._v("product-service")]),t._v(" directory so it now looks like this:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/product-service\n  wait-for-it.sh\n  Dockerfile\n  app.js\n  package.json\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("Now let’s open up the "),s("code",[t._v("Dockerfile")]),t._v(" and add the following:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// Dockerfile\n\nFROM node:latest\n\nWORKDIR /app\n\nENV PORT=3000\n\nCOPY . .\n\nRUN npm install\n\nEXPOSE $PORT\n\nCOPY wait-for-it.sh /wait-for-it.sh\n\nRUN chmod +x /wait-for-it.sh\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[t._v("Above we are copying the "),s("code",[t._v("wait-for-it.sh")]),t._v(" file to our container and on the line below we are giving it execution rights. Worth noting is how we also remove the "),s("code",[t._v("ENTRYPOINT")]),t._v(" from our "),s("code",[t._v("Dockerfile")]),t._v(", we will instead instruct the container to start from the "),s("code",[t._v("docker-compose.yaml")]),t._v(" file. Let’s have a look at said file next:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// excerpt from docker-compose.yaml\n\nservices:\n product-service:\n command: ["/wait-for-it.sh", "db:8002", "--", "npm", "start"]\n db:\n // definition of db service below\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("Above we are telling it to run the "),s("code",[t._v("wait-for-it.sh")]),t._v(" file and as an argument use "),s("code",[t._v("db:8002")]),t._v(" and after it gets a satisfactory response then we can go on to run "),s("code",[t._v("npm start")]),t._v(" which will then start up our service. That sounds nice, will it work?")]),t._v(" "),s("p",[t._v("For full disclosure let’s show our full "),s("code",[t._v("docker-compose.yaml")]),t._v(" file:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('version: \'3.3\'\n  services:\n    product-service:\n      depends_on:\n        - "db"\n      build:\n        context: ./product-service\n      command: ["/wait-for-it.sh", "db:8002", "--", "npm", "start"]\n    ports:\n      - "8000:3000"\n    environment:\n      - test=testvalue\n      - DATABASE_PASSWORD=complexpassword\n      - DATABASE_HOST=db\n    volumes:\n      - type: bind\n      source: ./product-service\n      target: /app\n    networks:\n      - products\n   db:\n     build: ./product-db\n       restart: always\n     environment:\n       - "MYSQL_ROOT_PASSWORD=complexpassword"\n       - "MYSQL_DATABASE=Products"\n     ports:\n       - "8002:3306"\n     networks:\n       - products\n   inventory-service:\n     build:\n       context: ./inventory-service\n     ports:\n       - "8001:3000"\n     volumes:\n       - my-volume:/var/lib/data\n\nvolumes:\n my-volume:\n\nnetworks:\n products:\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br")])]),s("p",[t._v("Ok, so to recap we placed "),s("code",[t._v("product-service")]),t._v(" and "),s("code",[t._v("db")]),t._v(" in the network "),s("code",[t._v("products")]),t._v(" and we downloaded the script "),s("code",[t._v("wait-for-it.sh")]),t._v(" and we told it to run before we spun up the app and in the process listen for the host and port of the database that would respond as soon as the database was ready for action. That means we have one step left to do, we need to adjust the "),s("code",[t._v("app.js")]),t._v(" file of the "),s("code",[t._v("product-service")]),t._v(", so let’s open that file up:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mysql "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" test "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" attempts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" seconds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  attempts"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATABASE_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'host'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATABASE_HOST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("`attempting to connect to DB time: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("attempts"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" con "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createConnection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n   host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATABASE_HOST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n   user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n   password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATABASE_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n   database"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Products'")]),t._v("  \n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  con"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n     console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n     "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n     console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CONNECTED!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  conn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'shit happened :)'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("`Hello product service, changed ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("`Example app listening on port ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("port"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("!`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br")])]),s("p",[t._v("Above we can see that we have defined a "),s("code",[t._v("connect()")]),t._v(" method that creates a connection by invoking "),s("code",[t._v("createConnection()")]),t._v(" with an object as an argument. That input argument needs to know "),s("code",[t._v("host")]),t._v(", "),s("code",[t._v("user")]),t._v(", "),s("code",[t._v("password")]),t._v(" and "),s("code",[t._v("database")]),t._v(". That seems perfectly reasonable. We also add a bit of logic to the "),s("code",[t._v("connect()")]),t._v(" method call namely we invoke "),s("code",[t._v("setTimeout()")]),t._v(", this means that it will attempt to do another connection after 30 seconds. Now, because we use "),s("code",[t._v("wait-for-it.sh")]),t._v(" that functionality isn’t really needed but we could rely on application code alone to ensure we get a connection. However, we also call "),s("code",[t._v("conn.on('error')")]),t._v(" and the reason for doing so is that we can loose a connection and we should be good citizens and ensure we can get that connection back.")]),t._v(" "),s("p",[t._v("Anyway, we’ve done everything in our power, but because we’ve introduced changes to "),s("code",[t._v("Dockerfile")]),t._v(" let’s rebuild everything with "),s("code",[t._v("docker-compose build")]),t._v(" and then let’s bring everything up with:")]),t._v(" "),s("blockquote",[s("p",[t._v("docker-compose up")])]),t._v(" "),s("p",[t._v("and….")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*-2XpY_avDd46TWcMa8EJHg.png",alt:""}})]),t._v(" "),s("p",[t._v("There it is, Houston WE HAVE A CONNECTION, or as my friend Barney likes to put it:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/496/1*a3L6-JOjwaH5f5cMjbCmtg.gif",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"setting-up-the-database-—-fill-it-with-structure-and-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-database-—-fill-it-with-structure-and-data","aria-hidden":"true"}},[t._v("#")]),t._v(" Setting up the database — fill it with structure and data")]),t._v(" "),s("p",[t._v("Ok, maybe you were wondering about the way we built the service db ? That part of "),s("code",[t._v("docker-compose.yaml")]),t._v(" looked like this:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// docker-compose.yaml\n\ndb:\n  build: ./product-db\n  restart: always\n  environment:\n    - "MYSQL_ROOT_PASSWORD=complexpassword"\n    - "MYSQL_DATABASE=Products"\n  ports:\n    - "8002:3306"\n  networks:\n    - products\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("I would you to look at build especially. We mentioned at the beginning of this article that we can pull down ready-made images of databases. That statement is still true but by creating our own Dockerfile for this, we can not only specify the database we want but we can also run commands like creating our database structure and insert seed data. Let’s have a close look at the directory "),s("code",[t._v("product-db")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/product-db\n  Dockerfile\n  init.sql\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("Ok, we have a "),s("code",[t._v("Dockerfile")]),t._v(", let’s look at that first:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// Dockerfile\n\nFROM mysql:5.6\n\nADD init.sql /docker-entrypoint-initdb.d\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("We specify that "),s("code",[t._v("init.sql")]),t._v(" should be copied and renamed to "),s("code",[t._v("docker-entrypoint-initdb.d")]),t._v(" which means it will run the first thing that happens. Great, what about the content of "),s("code",[t._v("init.sql")]),t._v("?")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// init.sql\n\nCREATE DATABASE IF NOT EXISTS Products;\n\n# create tables here\n# add seed data inserts here\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("As you can see it doesn’t contain much for the moment but we can definitely expand it, which is important.")]),t._v(" "),s("h2",{attrs:{id:"summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#summary","aria-hidden":"true"}},[t._v("#")]),t._v(" Summary")]),t._v(" "),s("p",[t._v("We have now come full circle in this series, we have explained everything from the beginning. The basic concepts, the core commands, how to deal with volumes and databases and also how to be even more effective with Docker Compose. This series will continue of course and go deeper and deeper into Docker but this should hopefully take you a bit on the way. Thanks for reading this far.")]),t._v(" "),s("hr")])},[],!1,null,null,null);e.default=a.exports}}]);