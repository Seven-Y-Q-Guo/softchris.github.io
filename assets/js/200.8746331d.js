(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{443:function(t,e,s){"use strict";s.r(e);var n=s(1),a=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"serverless-—-from-the-beginning-using-azure-functions-azure-portal-part-ii"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#serverless-—-from-the-beginning-using-azure-functions-azure-portal-part-ii","aria-hidden":"true"}},[t._v("#")]),t._v(" Serverless — from the beginning, using Azure functions ( Azure portal ), part II")]),t._v(" "),s("p",[t._v("Follow me on "),s("a",{attrs:{href:"https://twitter.com/chris_noring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Twitter"),s("OutboundLink")],1),t._v(", happy to take your suggestions on topics or improvements /Chris")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1000/1%2AJekyFSPow0EApgI0zgtvPw.jpeg",alt:""}})]),t._v(" "),s("p",[t._v("This is the second part of this series:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://dev.to/azure/serverless-from-the-beginning-using-azure-functions-azure-portal-part-i-28o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Serverless — from the beginning, using Azure functions ( Azure portal )"),s("OutboundLink")],1),t._v(", part I, this part focuses on presenting the concept Serverless and also shows how you can build your first Azure function using the portal")]),t._v(" "),s("li",[t._v("Serverless — from the beginning, using Azure functions ( Azure portal ), part II, "),s("strong",[t._v("we are here")])]),t._v(" "),s("li",[t._v("Serverless — from the beginning, using Azure functions ( VS Code ), part III, in progress")]),t._v(" "),s("li",[t._v("Serverless — from the beginning, using Azure functions ( Azure CLI ), part IV, in progress")])]),t._v(" "),s("p",[t._v("In this article we will cover the following:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Getting to know the IDE generally")]),t._v(" , The portal may not be the ideal IDE to write your Azure Functions in but it does contain a lot of great functionality to author your function")]),t._v(" "),s("li",[s("strong",[t._v("Splitting up in modules")]),t._v(" , As this is Node.js we can definitely use the CommonJS module system")]),t._v(" "),s("li",[s("strong",[t._v("Using libraries,")]),t._v(" You can definitely use NPM to install libraries")]),t._v(" "),s("li",[s("strong",[t._v("Use HTTP and async/await")]),t._v(" , you can definitely call other endpoints from our function and present the result")]),t._v(" "),s("li",[s("strong",[t._v("Logging")]),t._v(" , there are different ways we can work with logging, let’s see how we can log statements and log at them afterward")])]),t._v(" "),s("h2",{attrs:{id:"resources"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resources","aria-hidden":"true"}},[t._v("#")]),t._v(" Resources")]),t._v(" "),s("p",[t._v("There is always a ton more to learn about functions such as how to work with different types of trigger, how to create APIS, how to document those APIs and so on. We have merely scratched the surface")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://azure.microsoft.com/en-gb/services/functions/?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://azure.microsoft.com/en-gb/services/functions/"),s("OutboundLink")],1),t._v(", General landing page for Azure functions")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.microsoft.com/en-gb/azure/"),s("OutboundLink")],1),t._v(" , Main docs page for Azure")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/azure-functions/?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.microsoft.com/en-gb/azure/azure-functions/"),s("OutboundLink")],1),t._v(", landing page for Azure Functions documentation")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/azure-functions/functions-create-first-azure-function?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.microsoft.com/en-gb/azure/azure-functions/functions-create-first-azure-function"),s("OutboundLink")],1),t._v(", Tutorial to how you create your first function")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/azure-functions/functions-create-serverless-api?wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.microsoft.com/en-gb/azure/azure-functions/functions-create-serverless-api"),s("OutboundLink")],1),t._v(", How to create an Serverless API")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-us/learn/browse/?roles=developer&resource_type=module&term=Azure%20functions&wt.mc_id=academic-0000-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Link"),s("OutboundLink")],1),t._v(" to all the LEARN modules on Azure functions,")])]),t._v(" "),s("h2",{attrs:{id:"recap-and-next-steps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recap-and-next-steps","aria-hidden":"true"}},[t._v("#")]),t._v(" Recap and next steps")]),t._v(" "),s("p",[t._v("Ok, so hopefully you’ve read the first part in this series so you know your way around creating a "),s("code",[t._v("Function app")]),t._v(" and your first "),s("code",[t._v("Azure function")]),t._v(" and how to run the same in your Portal IDE and in the browser. If not, have a look "),s("a",{attrs:{href:"https://dev.to/azure/serverless-from-the-beginning-using-azure-functions-azure-portal-part-i-28o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("At this point, we’ve merely scratched the surface of what the portal IDE can do. So let’s try to refactor our code from our first post in this series and discover some of the Portal IDEs while we do so.")]),t._v(" "),s("h2",{attrs:{id:"getting-to-know-your-portal-ide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-to-know-your-portal-ide","aria-hidden":"true"}},[t._v("#")]),t._v(" Getting to know your portal IDE")]),t._v(" "),s("p",[t._v("Once your function has been generated it’s time to get to know your portal IDE. It looks like this:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*gbl5ptIHPPmXm6ike56NSg.png",alt:""}})]),t._v(" "),s("p",[t._v("It consists of the following:")]),t._v(" "),s("p",[s("strong",[t._v("Left menu")]),t._v(" , this is placed on the left side right under your function")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Integrate")]),t._v(" , this lets you control things like allowed HTTP method, Authorization level, and probably most important Inputs and Outputs, here you can configure what type of events can trigger our function but also what kind of events we can trigger in turn by returning something from the function")]),t._v(" "),s("li",[s("strong",[t._v("Manage")]),t._v(", this is where we manage "),s("em",[t._v("function keys")]),t._v(" and "),s("em",[t._v("host keys")]),t._v(". Depending on authorization level you will need one or more of these keys in your requests to be able to call a specific function in your Function app")]),t._v(" "),s("li",[s("strong",[t._v("Monitor")]),t._v(", this shows all the executions of a function, if it went well and how long it took")])]),t._v(" "),s("p",[s("strong",[t._v("Toolbar")]),t._v(", this is placed at the top and lets you do things like Save, Run and get a URL for your function")]),t._v(" "),s("p",[s("strong",[t._v("The right menu")]),t._v(", this is a tabulated menu on your left that allows you to do two things:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("add/remove files")]),t._v(" to your project, yes you can have a project consisting of many files. It’s Node.js and CommonJS so we can expect things like require and module.exports to work")]),t._v(" "),s("li",[s("strong",[t._v("Test")]),t._v(" , we get help constructing requests towards our service, both choice of HTTP method and payload")])]),t._v(" "),s("p",[s("strong",[t._v("The bottom menu")]),t._v(", this contains two different things:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Logs")]),t._v(", this will show you log output from your function")]),t._v(" "),s("li",[s("strong",[t._v("Console")]),t._v(", this is a terminal window that allows you to browse the directory your Function app project is in and allows you to do most things a terminal would allow")])]),t._v(" "),s("h2",{attrs:{id:"refactoring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#refactoring","aria-hidden":"true"}},[t._v("#")]),t._v(" Refactoring")]),t._v(" "),s("p",[t._v("Ok, so we understand better what parts our Portal IDE consists of, let’s now have a look at our code we created in the "),s("a",{attrs:{href:"https://dev.to/azure/serverless-from-the-beginning-using-azure-functions-azure-portal-part-i-28o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("first part"),s("OutboundLink")],1),t._v(" of this series. The first thing we have is this static list of questionable jokes:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" jokes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Did you hear about the restaurant on the moon? Great food, no atmosphere."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"What do you call a fake noodle? An Impasta."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"How many apples grow on a tree? All of them."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Want to hear a joke about paper? Nevermind it\'s tearable."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I just watched a program about beavers. It was the best dam program I\'ve ever seen."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Why did the coffee file a police report? It got mugged."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"How does a penguin build it\'s house? Igloos it together."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the rest of the code omitted for brevity")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("p",[t._v("What we normally do in Node.js project is to move those to a separate file that we call jokes.js. So, therefore, let’s use our right menu and create a file. We need to take the following steps:")]),t._v(" "),s("ol",[s("li",[t._v("Expand the right menu")]),t._v(" "),s("li",[t._v("Add a new file by clicking "),s("code",[t._v("+ Add")])]),t._v(" "),s("li",[t._v("enter the filename jokes.js")]),t._v(" "),s("li",[t._v("move our list to jokes.js")]),t._v(" "),s("li",[t._v("import jokes.js as a module from our main file "),s("code",[t._v("index.js")])])]),t._v(" "),s("h3",{attrs:{id:"expand-menu"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expand-menu","aria-hidden":"true"}},[t._v("#")]),t._v(" Expand menu")]),t._v(" "),s("p",[t._v("This is pretty straight forward, just click on the menu itself, like so:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/124/1*xRy4G_2danLGJG8HXcMgHg.png",alt:""}})]),t._v(" "),s("p",[t._v("and it ends up looking like so:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/960/1*EAWgnLpeAiKaRHwbOxlJmA.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"add-a-new-file-and-move-the-list-in-there"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-a-new-file-and-move-the-list-in-there","aria-hidden":"true"}},[t._v("#")]),t._v(" Add a new file and move the list in there")]),t._v(" "),s("p",[t._v("Ok, so we click "),s("code",[t._v("+ Add")]),t._v(" and end up with this:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/406/1*Kxf0XHtlHKceOO57yOkUQA.png",alt:""}})]),t._v(" "),s("p",[t._v("We fill in our filename "),s("code",[t._v("jokes.js")]),t._v(" and move over the content from "),s("code",[t._v("index.js")]),t._v(" and we should now have:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*QcpH-pA1OIWkrq0llzOvTw.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("Don’t forget to addmodule.exports = jokes at the end of "),s("code",[t._v("jokes.js")]),t._v(" to ensure we can import our jokes list properly.")])]),t._v(" "),s("h3",{attrs:{id:"import-our-jokes-js-file-as-a-node-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#import-our-jokes-js-file-as-a-node-module","aria-hidden":"true"}},[t._v("#")]),t._v(" Import our jokes.js file as a Node module")]),t._v(" "),s("p",[t._v("At the top of our "),s("code",[t._v("index.js")]),t._v(" file we can now write:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" jokes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./jokes'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("and that’s enough to make it work.")]),t._v(" "),s("h3",{attrs:{id:"move-remaining-static-content-to-separate-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#move-remaining-static-content-to-separate-files","aria-hidden":"true"}},[t._v("#")]),t._v(" Move remaining static content to separate files")]),t._v(" "),s("p",[t._v("We also had a list of URLs for pictures of laughing Dogs that we found on the Internet. Let’s create a file "),s("code",[t._v("dogUrls.js")]),t._v(" and place all the URLs in there. It should look something like this:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dogUrls.js")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" dogUrls "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// your URLs")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dogUrls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("Just like with jokes.js we can now import "),s("code",[t._v("dogUrls.js")]),t._v(" as a Node module as well. So the top of our "),s("code",[t._v("index.js")]),t._v(" should now look like this:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" jokes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./jokes'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dogUrls "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dogUrls'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h2",{attrs:{id:"a-new-project-using-a-rest-endpoint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-new-project-using-a-rest-endpoint","aria-hidden":"true"}},[t._v("#")]),t._v(" A new project using a REST endpoint")]),t._v(" "),s("p",[t._v("At this point we will move away from our DadJokes service, it’s probably as good as it’s ever going to get, which isn’t saying much 😉 It’s time to take on another favorite of the Internet, cat pictures !!.")]),t._v(" "),s("p",[t._v("I think I heard your squeal of despair all the way from here. Don’t worry this is just for educational purposes so we learn how to work with HTTP calls and downloading dependencies 😃.")]),t._v(" "),s("p",[t._v("Because we are building a new function we need to first create a new function and give it a suitable name so first click on adding a new function:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/478/1*ewlMtEciveoyutMezOXymg.png",alt:""}})]),t._v(" "),s("p",[t._v("and then when you are presented with Triggers choose HTTP trigger:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/986/1*RPkwTErISVx0AS1zpiiZhQ.png",alt:""}})]),t._v(" "),s("p",[t._v("Thereafter set authorization level to Anonymous and give it the name CatsAsAService , like so:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/912/1*Lii0rdxH-J5kTkuqRxjIZg.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"adding-a-library"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-library","aria-hidden":"true"}},[t._v("#")]),t._v(" Adding a library")]),t._v(" "),s("p",[t._v("At this point, we have a new function but we need to add the capability to do HTTP calls. To make that happen we need to use a library that can do that for us. We could use the built-in http library but we opt to install the "),s("code",[t._v("node-fetch")]),t._v(" library instead with is just like the fetch that you use in the browser. We need to do two things at this point:")]),t._v(" "),s("ol",[s("li",[t._v("Initialize a proper Node.js project, we do that by running the command "),s("code",[t._v("npm init -y")]),t._v(" in the terminal")]),t._v(" "),s("li",[t._v("install the node-fetch library, we do that by running the command "),s("code",[t._v("npm install node-fetch")])])]),t._v(" "),s("p",[t._v("To accomplish the above we need to head to the bottom menu and click "),s("code",[t._v("Console")]),t._v(", like so:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1012/1*oC3V5-8srl1lxPJIbwC84w.png",alt:""}})]),t._v(" "),s("p",[t._v("Ok, let’s first hit the command "),s("code",[t._v("dir")]),t._v(", to list our files, we are inside of Windows system 😃")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/990/1*TEpOPKcnOkU6SdVpT3flCg.png",alt:""}})]),t._v(" "),s("p",[t._v("Ok, above we can see we have the files function.json and "),s("code",[t._v("index.js")]),t._v(". Lets now run our commands "),s("code",[t._v("npm init -y")]),t._v(" followed by "),s("code",[t._v("npm install node-fetch")]),t._v(". Those commands create a "),s("code",[t._v("package.json")]),t._v(" file and a "),s("code",[t._v("package-lock.json")]),t._v(" as a result of us initializing our Node project but also downloading "),s("code",[t._v("node-fetch")]),t._v(".")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/968/1*HcESWOk3U2Z1H9tC4UyGpw.png",alt:""}})]),t._v(" "),s("p",[t._v("We can also see that "),s("code",[t._v("node-fetch")]),t._v(" have been installed by inspecting "),s("code",[t._v("package.json")]),t._v(":")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/404/1*SK2JsKzIse7GjxC5yg2_Lg.png",alt:""}})]),t._v(" "),s("p",[t._v("Great, so node-fetch is there and we can thereby use it to make HTTP calls.")]),t._v(" "),s("h3",{attrs:{id:"working-with-logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-logs","aria-hidden":"true"}},[t._v("#")]),t._v(" Working with logs")]),t._v(" "),s("p",[t._v("With Azure functions, we have an excellent way of logging namely by using our first argument in our Azure function called "),s("code",[t._v("context")]),t._v(". "),s("code",[t._v("context")]),t._v(" has a "),s("code",[t._v("log()")]),t._v(" method on it that when used can log to our "),s("code",[t._v("Logs")]),t._v(" window in our bottom menu.")]),t._v(" "),s("p",[t._v("Let’s do the following:")]),t._v(" "),s("ol",[s("li",[t._v("Import node-fetch and make a fetch call towards an API")]),t._v(" "),s("li",[t._v("log the resulting JSON using context.log()")])]),t._v(" "),s("p",[t._v("Ok let’s first declare a function that will do the HTTP call, like so:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fetch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node-fetch'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHttp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'calling HTTP service'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://swapi.co/api/people/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("Above we declare the method "),s("code",[t._v("getHttp()")]),t._v(" and then we use our "),s("code",[t._v("fetch()")]),t._v(" method and give it a URL. In the "),s("code",[t._v("then()")]),t._v(" callback we ensure that we transform the result into JSON, so far so good.")]),t._v(" "),s("p",[t._v("For our next step, we go into our Azure function and invoke "),s("code",[t._v("getHttp()")]),t._v(",. Because it’s using the "),s("em",[t._v("async")]),t._v(" keyword we can use await to wait for the result to come back and then log it out, like so:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// excerpt from index.js")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" json "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHttp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rest of the function down here")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("Running the function at this point gives us the following output in Logs :")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1004/1*1Or2qENQE8GNUEc3G1--jQ.png",alt:""}})]),t._v(" "),s("p",[t._v("As you can see above we get a nice response, however, it returns 87 records so I cut it after the first item in the list it returns. The URL we were using was for the open Star Wars API and it contains everything we could possibly want to know about the franchise. Let's stay on mission however and go back to Cats..")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/355/1*pnfHD-Z1MSfizhmITuE1Lg.gif",alt:""}})]),t._v(" "),s("p",[t._v("Sorry Luke 😃")]),t._v(" "),s("p",[t._v("Not at all surprising, trying to Google a Cat API you get a HUGE amount of responses, cause we all know that Internet was designed to support Cat memes, right 😉 I’ve decided on a specific API, cause it didn’t require me to sign up for an API key. I went with "),s("code",[t._v("thecatapi")]),t._v(" and the following URL in particular:")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://api.thecatapi.com/v1/images/search",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://api.thecatapi.com/v1/images/search"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("You can definitely sign up and get an API key and get a richer experience, but we will only use the free version and we end up getting a response looking something like this:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"breeds"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"26k"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[https://cdn2.thecatapi.com/images/26k.jpg](https://cdn2.thecatapi.com/images/26k.jpg)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"width"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3817")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"height"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2553")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("We can definitely work with the above and try presenting that in an HTML image, as we did with our Dad Jokes, so let’s do that next:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncontext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/html"')]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h3>Cat</h3>'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<br><img src=\"'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"/>'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("The above digs out the URL from the response and we populate a response object, give it the response type HTML and we let the body consist of an IMG tag with its src set to our JSON URL. The result looks like:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn-images-1.medium.com/max/1024/1*G5P-Rhzj74nVJuy93gMUbQ.png",alt:""}})]),t._v(" "),s("p",[t._v("Isn’t that something 😃")]),t._v(" "),s("p",[t._v("That was the end of this part. In our next part, we will show you how to work with functions in VS Code, cause let’s face it, even though the Portal seems to have some nice functions it’s not really the IDE of our dreams. See you in VS Code.")]),t._v(" "),s("h2",{attrs:{id:"summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#summary","aria-hidden":"true"}},[t._v("#")]),t._v(" Summary")]),t._v(" "),s("p",[t._v("We aimed to describe the IDE in the portal a bit better and we managed to describe and explain what parts it consisted of and what their purpose was. Moving on we took our old DadJokesAsAService function and refactored it and we thereby introduced how you could be using Node modules. Thereafter we created a new Azure function and learned how we could install a library like "),s("code",[t._v("node-fetch")]),t._v(". We then used "),s("code",[t._v("node-fetch")]),t._v(" to call a Cat API responding with JSON and we ended up responding with yet another page with cats on it. Thereby we contributed to Internets original purpose 😉")]),t._v(" "),s("p",[t._v("This was the last part of our Portal series but in our next part, we will look at how we can author Azure functions from VS Code so I hope you are excited about that.")])])},[],!1,null,null,null);e.default=a.exports}}]);