(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{389:function(t,e,s){"use strict";s.r(e);var a=s(1),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("TLDR; Azure Static Web Apps is a service that allows you to deploy both JavaScript apps "),s("strong",[t._v("but now also Blazor apps")]),t._v(". The service is simple to use as it only requires an Azure subscription and a GitHub repo. That's all the set up you need.")])]),t._v(" "),s("h2",{attrs:{id:"resources"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resources","aria-hidden":"true"}},[t._v("#")]),t._v(" Resources")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://devblogs.microsoft.com/aspnet/azure-static-web-apps-with-blazor/?wt.mc_id=devto-blog-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Blazor on Static Web Apps blog post"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-us/learn/modules/build-blazor-webassembly-visual-studio-code/?wt.mc_id=devto-blog-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Blazor LEARN Module"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/azure/static-web-apps/deploy-blazor?wt.mc_id=devto-blog-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Blazor + Static Web Apps Tutorial"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-gb/learn/modules/publish-app-service-static-web-app-api-dotnet?wt.mc_id=devto-blog-chnoring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Blazor + Static Web Apps, LEARN module"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://dev.to/dotnet/blazor-the-future-of-net-web-apps-a-first-look-m8",target:"_blank",rel:"noopener noreferrer"}},[t._v("Intro to Blazor"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://dev.to/dotnet/learn-hot-build-and-work-with-blazor-apps-using-net-core-c-and-javasript-5dmg",target:"_blank",rel:"noopener noreferrer"}},[t._v("Working with Blazor and JavaScript"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"blazor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#blazor","aria-hidden":"true"}},[t._v("#")]),t._v(" Blazor")]),t._v(" "),s("p",[t._v("Blazor is a framework that allows you to write C# fullstack. If you are developing a fullstack web application, you usually have to involve JavaScript at some point. You either add it to improve the interaction of your pages or you split between having a backend in .NET and the frontend in JavaScript using for example a SPA framework like React, Angular or maybe Vue. A Blazor app can be compiled into WebAssembly and can thereby be a first-class web citizen and also really fast.")]),t._v(" "),s("p",[t._v("If you are completely new to Blazor I recommend reading this "),s("a",{attrs:{href:"https://dev.to/dotnet/blazor-the-future-of-net-web-apps-a-first-look-m8",target:"_blank",rel:"noopener noreferrer"}},[t._v("intro article"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"what-is-azure-static-web-apps-service"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-is-azure-static-web-apps-service","aria-hidden":"true"}},[t._v("#")]),t._v(" What is Azure Static Web apps service")]),t._v(" "),s("p",[t._v("Static Web Apps is an Azure service with which you can deploy fullstack apps within minutes. It can deploy both JavaScript projects as well as Blazor.")]),t._v(" "),s("blockquote",[s("p",[t._v("NET developer here, you have my attention. So, it can deploy a Blazor project, what else can it do?")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Web hosting")]),t._v(", your app is hosted on Azure, the end product it hosts is just HTML, CSS and JavaScript or Web Assembly.")]),t._v(" "),s("li",[s("strong",[t._v("Integrated API")]),t._v(", you can add a Serverless API to your app at any time.")]),t._v(" "),s("li",[s("strong",[t._v("Free SSL certificates")])]),t._v(" "),s("li",[s("strong",[t._v("Reverse proxy")]),t._v(". When calling APIs, no need to configure CORS, it just works.")]),t._v(" "),s("li",[s("strong",[t._v("Social auth + AAD supported")]),t._v(". Through simple configuration get auth providers like GitHub, Linked In and even Azure Active Directory authentication/authorization to just work. This includes being able to set up separate roles to have access to specific resources.")])]),t._v(" "),s("blockquote",[s("p",[t._v("That's a nice featurelist. I care about "),s("em",[t._v("ease of use")]),t._v(", what can you tell me about that?")])]),t._v(" "),s("p",[t._v("There's not much to fill in, everything revolves around your GitHub repo and once you selected a repo, and a few other things, it starts deploying it.")]),t._v(" "),s("blockquote",[s("p",[t._v("Ok, but how does it work under the hood?")])]),t._v(" "),s("p",[t._v("It works by creating and running GitHub actions that carries out things like fetching dependent libraries, building your code, and finally deploying it. You end up getting a so-called workflow file pushed to your repo (it's a YAML file).")]),t._v(" "),s("blockquote",[s("p",[t._v("Alright, but I'm likely to update my code quite a lot, does it help me with redeploy?")])]),t._v(" "),s("p",[t._v("It does, you can define in the workflow file when a redeploy should be trigger, like merging of a PR or a commit to master/main branch for example.")]),t._v(" "),s("blockquote",[s("p",[t._v("This all sounds very promising; can you take me through a deploy?")])]),t._v(" "),s("p",[t._v("Of course, next thing on my list ðŸ˜ƒ")]),t._v(" "),s("h2",{attrs:{id:"deploy-your-first-blazor-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-your-first-blazor-app","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploy your first Blazor app")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Clone an app")]),t._v(". The easiest way to get started is to create a Blazor app from this GitHub template")])]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://github.com/MicrosoftDocs/mslearn-staticwebapp-dotnet/generate",target:"_blank",rel:"noopener noreferrer"}},[t._v("Generate app\nfrom GH template"),s("OutboundLink")],1),t._v(". "),s("strong",[t._v("Ensure you are logged into GitHub before clicking this link or you will get a 404")])])]),t._v(" "),s("p",[t._v("Once it's done generating you now have a repo on your GH user. Type the following command:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git clone <name of repo URL> \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",[s("li",[s("p",[s("strong",[t._v("Inspect an app")]),t._v(". To inspect the app, first ensure you have the latest version of dotnet core installed "),s("a",{attrs:{href:"https://dotnet.microsoft.com/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("install"),s("OutboundLink")],1),t._v(". Change directory to that of your cloned repo.")]),t._v(" "),s("ol",[s("li",[t._v("Build the solution. Ensure you are standing at the solution root and type the following command:")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("dotnet build\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",[s("li",[s("strong",[t._v("Run the client app")]),t._v(". Run the client by typing the following command:")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd Client\ndotnet run\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("You should get a terminal output similar to the following:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("info: Microsoft.Hosting.Lifetime[0]\n   Now listening on: https://localhost:5001\ninfo: Microsoft.Hosting.Lifetime[0]\n   Now listening on: http://localhost:5000\ninfo: Microsoft.Hosting.Lifetime[0]\n   Application started. Press Ctrl+C to shut down.\ninfo: Microsoft.Hosting.Lifetime[0]\n   Hosting environment: Development\ninfo: Microsoft.Hosting.Lifetime[0]\n   Content root path: \n/path/to/project/blazor-sample/Client\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("ol",[s("li",[s("strong",[t._v("Navigate to the app")]),t._v(". Type the following URL in the browser "),s("strong",[t._v("localhost:5000")]),t._v(". The browser should now display the following content:")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/p6zt2hftazyv7wk4nf6j.png",alt:"Alt Text"}})])])]),t._v(" "),s("h2",{attrs:{id:"deploy-the-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-app","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploy the app")]),t._v(" "),s("p",[t._v("At this point you have a working Blazor app that you can deploy using Azure Static functions. How do you do that?")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Navigate to the URL "),s("strong",[t._v("portal.azure.com")]),t._v(" in your browser and log on to Azure.")])]),t._v(" "),s("li",[s("p",[t._v("Type "),s("strong",[t._v("Static Web Apps")]),t._v(" and select the suggestion.")])]),t._v(" "),s("li",[s("p",[t._v("Click the "),s("strong",[t._v("+ Add")]),t._v(" in the top left area.")]),t._v(" "),s("p",[t._v("Now you are met with a set of dropdowns where you need to fill in some info.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Subscription")]),t._v(", select the subscription you want")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Resource group")]),t._v(", select the resource group you want or create a new one.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Name.")]),t._v(" Give the app name.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Region.")]),t._v(" Select a region.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("SKU.")]),t._v(" No need to do a selection here, the service is free for now.")])]),t._v(" "),s("li",[s("p",[t._v("Click "),s("strong",[t._v("Sign in to GitHub")]),t._v(", after clicking this button you will need to locate and pick your generated repo.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Organization")]),t._v(". Select organization.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Repository")]),t._v(". Select the repo that was created when you generated it from the template.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Branch.")]),t._v(". Select the branch, in this case we only have the "),s("strong",[t._v("main")]),t._v(" branch.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Build presets")]),t._v(". Select "),s("strong",[t._v("Custom")]),t._v(", now you are presented with some options:")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("App location")]),t._v(". This is where the client app lives, so type "),s("strong",[t._v("/Client")]),t._v(" here.")]),t._v(" "),s("li",[s("strong",[t._v("Api location")]),t._v(", leave as default")]),t._v(" "),s("li",[s("strong",[t._v("App artifact location")]),t._v(". This is the folder that your client app gets built to. Give it the following value "),s("strong",[t._v("wwwroot")])])])]),t._v(" "),s("li",[s("p",[t._v("Click "),s("strong",[t._v("Review + Create")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("Click "),s("strong",[t._v("Create")]),t._v(" at this point if you are happy with all selections you've made.")]),t._v(" "),s("p",[t._v("Click to be taken to the resource once deployed. The resource page should look something like this:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/ij3w8dy7f2d00k7drs0g.png",alt:"Alt Text"}})]),t._v(" "),s("p",[t._v("Above you have the resource. You could click the URL from the indicated field, but it would take you to default page. Why is that? Your app hasn't finished building yet. Instead click the link "),s("strong",[t._v("GitHub action runs")]),t._v(". This will take you to the GitHub actions of your repo. Once all the actions have finished it should look like so:")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/anml91259djotc5r7g33.png",alt:"Alt Text"}})]),t._v(" "),s("ol",[s("li",[t._v("Revisit your app. Now go back to the resource page at the Azure portal and click that app URL. You should see the following:")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/5s3zbz1znwtiqyrrifj3.png",alt:"Alt Text"}})]),t._v(" "),s("p",[t._v("There you have it, your deployed app ðŸ˜ƒ")]),t._v(" "),s("h2",{attrs:{id:"adding-an-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-an-api","aria-hidden":"true"}},[t._v("#")]),t._v(" Adding an API")]),t._v(" "),s("p",[t._v("Now a Blazor app could contain its own backend. The way the Azure Static Web Apps service is constructed though it assumes your backend will be located in an "),s("strong",[t._v("Api")]),t._v(" directory. So what should be in that directory? Well a function app. Luckily your repo already have a working function app, almost.")]),t._v(" "),s("p",[t._v("Let's review our repo quickly. Your solution should look something like this.")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-| Api\n-| Data\n-| Client\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("You already know about the "),s("strong",[t._v("Client")]),t._v(" directory where your Blazor app lives. The other directory of interest is the "),s("strong",[t._v("Api")]),t._v(" directory that contains a Function app. It's an almost functioning Function app. What do I mean by "),s("em",[t._v("almost")]),t._v("? Well let's have a look at it, expanding the "),s("strong",[t._v("Api")]),t._v(" directory there are some files of interest:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Client/\nApi/\n  ProductData.cs\n  ProductsDelete.cs\n  ProductsPost.cs\n  ProductsPut.cs\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("The first file "),s("code",[t._v("ProductData.cs")]),t._v(" contains an in-memory data store. The remaining three files is just routes for our API.")]),t._v(" "),s("p",[t._v("*** Adding missing GET route")]),t._v(" "),s("p",[t._v("For this API to be a full "),s("strong",[t._v("C")]),t._v("reate "),s("strong",[t._v("R")]),t._v("ead "),s("strong",[t._v("U")]),t._v("pdate "),s("strong",[t._v("D")]),t._v("elete it needs another file "),s("code",[t._v("ProductsGet.cs")]),t._v(", let's create that file and give it the following content:")]),t._v(" "),s("div",{staticClass:"language-csharp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" System"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Threading"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Tasks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" Microsoft"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AspNetCore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Mvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" Microsoft"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Azure"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebJobs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" Microsoft"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Azure"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebJobs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Extensions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" Microsoft"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AspNetCore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" Api\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProductsGet")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IProductData")]),t._v(" productData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ProductsGet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IProductData")]),t._v(" productData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FunctionName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ProductsGet"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" Task"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IActionResult"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpTrigger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthorizationLevel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Anonymous"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"get"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Route "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"products"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpRequest")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" products "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" productData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetProducts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OkObjectResult")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("products"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br")])]),s("p",[t._v("Now select "),s("strong",[t._v("Run > Start debugging")]),t._v(" from the top menu in VS Code. At the end of the build output you should have text stating something like this:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ProductsPut: [PUT] http://localhost:7071/api/products\n\nProductsGet: [GET] http://localhost:7071/api/products\n\nProductsPost: [POST] http://localhost:7071/api/products\n\nProductsDelete: [DELETE] http://localhost:7071/api/products/{productId:int}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("You are almost there.")]),t._v(" "),s("h3",{attrs:{id:"testing-locally-set-up-cors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing-locally-set-up-cors","aria-hidden":"true"}},[t._v("#")]),t._v(" Testing locally, set up CORS")]),t._v(" "),s("p",[t._v("When testing things out locally you need to instruct the Function to allow requests from a cross domain, i.e our Blazor app. How do we do that? Locate the "),s("strong",[t._v("local.settings.json")]),t._v(" file and ensure it has the following content:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IsEncrypted"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Values"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"AzureWebJobsStorage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"FUNCTIONS_WORKER_RUNTIME"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dotnet"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"CORS"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("Above you added the "),s("strong",[t._v("Host")]),t._v(" property and made "),s("strong",[t._v("CORS")]),t._v(" point to allowing all requests. This is just something we do locally, don't worry about this making production.")]),t._v(" "),s("p",[t._v("At this point you can run your client Blazor app and it will look like this:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/err8mhqqnorlsocj8ixj.png",alt:"Alt Text"}})]),t._v(" "),s("p",[t._v("The Blazor app is now able to talk to your Function app backend.")]),t._v(" "),s("h2",{attrs:{id:"deploy-the-app-now-with-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-app-now-with-api","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploy the app, now with API")]),t._v(" "),s("p",[t._v("So how do you deploy this so that the API part is there? You need to do the following:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Adjust the workflow YML file")]),t._v(" and point out the Api directory")]),t._v(" "),s("li",[s("strong",[t._v("Push the changes")]),t._v(" you did you did to the workflow file and Api directory")])]),t._v(" "),s("p",[t._v("That's it, the way the workflow file is constructed it should pick up the changes "),s("em",[t._v("on push")]),t._v(" and redeploy the app.")]),t._v(" "),s("h3",{attrs:{id:"adjust-workflow-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adjust-workflow-file","aria-hidden":"true"}},[t._v("#")]),t._v(" Adjust workflow file")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("Open up the workflow file")]),t._v(". It's a file ending in "),s("strong",[t._v(".yml")]),t._v(" in your "),s("strong",[t._v(".github")]),t._v(" sub directory (ensure you have done a git pull before this so you get this file as it's created and added to your repo the first time you deploy).")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Locate the section called "),s("code",[t._v("api_location:")])]),t._v(". Ensure it looks like this "),s("strong",[t._v('api_location: "/Api"')]),t._v(". This will point out our "),s("strong",[t._v("Api")]),t._v(" sub directory.")])])]),t._v(" "),s("h3",{attrs:{id:"push-the-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#push-the-changes","aria-hidden":"true"}},[t._v("#")]),t._v(" Push the changes")]),t._v(" "),s("p",[t._v("Type the following command:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('git add .\ngit commit -m "adding API"\ngit push\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("The above should push your changes to GitHub and the GitHub actions should be triggered.")]),t._v(" "),s("ol",[s("li",[t._v("Go to the GitHub actions tab and wait for the actions to finish. Now ensure you reload the page")])]),t._v(" "),s("p",[t._v("You should now see something like this:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://dev-to-uploads.s3.amazonaws.com/i/xnsct89nss3rhafms7h9.png",alt:"Alt Text"}})]),t._v(" "),s("p",[t._v("There you have it, both your Blazor client and your API is working. !")]),t._v(" "),s("h2",{attrs:{id:"summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#summary","aria-hidden":"true"}},[t._v("#")]),t._v(" Summary")]),t._v(" "),s("p",[t._v("You've been taken through")]),t._v(" "),s("ul",[s("li",[t._v("Generating a Blazor fullstack app from a GitHub template")]),t._v(" "),s("li",[t._v("You've first deployed the Blazor app")]),t._v(" "),s("li",[t._v("Secondly you added an API to your Blazor app and ensured it worked locally before proceeding.")]),t._v(" "),s("li",[t._v("Lastly, you added the API by pushing a commit and the app was redeployed")])]),t._v(" "),s("p",[t._v("Conclusion, Azure Static Web Apps service is a really fast way to deploy a Blazor app. If you are using Serverless the service takes care of that too.")]),t._v(" "),s("h3",{attrs:{id:"what-s-next"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-s-next","aria-hidden":"true"}},[t._v("#")]),t._v(" What's next")]),t._v(" "),s("p",[t._v("There's more things to learn like fallback routes and how to secure your app. I urge you to look through the links in the references section, both to learn more about Blazor but also to take the LEARN module that goes through what we just did a bit slower. There's also some links how to add auth, support for AAD is built-in and needs only to be configured to work..")]),t._v(" "),s("p",[t._v("Hope this got you inspired to build lots of Blazor apps. ðŸ˜ƒ")])])},[],!1,null,null,null);e.default=n.exports}}]);